{"version":3,"sources":["webpack:///pivot.js","webpack:///webpack/bootstrap 39c3f3d6a33418b789e9","webpack:///./sources/pivot.js","webpack:///./sources/locale.js","webpack:///./sources/views/menu.js","webpack:///./sources/pivottable.js","webpack:///./sources/filters.js","webpack:///./sources/ext/filters.js","webpack:///./sources/views/tablepopup.js","webpack:///./sources/pivotchart.js","webpack:///./sources/views/chartpopup.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","webix","i18n","pivot","extend","apply","bar","cancel","chartType","columns","count","date","fields","filters","groupBy","line","logScale","max","min","multiselect","operationNotDefined","layoutIncorrect","pivotMessage","popupHeader","radar","radarArea","rows","select","settings","stackedBar","sum","text","total","values","valuesNotDefined","windowTitle","windowMessage","protoUI","name","_selected","$init","config","this","_get_ui","$ready","push","_after_init","body","view","borderless","autoheight","template","data","attachEvent","$eventSource","getItem","hide","getSelected","ui","popup","IdSpace","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","_typeof","Symbol","iterator","constructor","_filters","flt","version","defaults","fieldMap","yScaleWidth","columnWidth","filterLabelAlign","filterWidth","filterMinWidth","filterLabelWidth","$divider","structure","$view","className","render","bind","$$","hidden","cols","table","navigation","leftSplit","resizeColumn","on","onHeaderClick","getTopParentView","getColumnIndex","column","readonly","configure","datatable","_config_popup","operations","callEvent","define","functions","i","title","_apply_locale","pos","html","offset","getNode","setPosition","x","y","getFields","show","without_filters","_process_data","pull","order","footer","_add_footer","header","_process_filters","length","_filter_events","totalColumn","refreshColumns","clearAll","parse","grid","names","split","content","value","format","parseFloat","toFixed","$exportView","options","filterHTML","_apply_map","items","f","item","label","field","type","labelAlign","labelWidth","minWidth","maxWidth","_distinct_values","empty","hash","isUndefined","isNumeric","n","isNaN","sort","a","b","val1","val2","toString","toLowerCase","reconstruct","children","getChildViews","el","newvalue","_set_filter_value","getValue","_init_filters","_header","_header_hash","operation","isArray","_i","concat","_group","_process_rows","_process_columns","_process_header","_groupItem","slice","_filter_item","_i2","j","k","_calculate_item","_minmax_in_row","open","_i3","_item","vname","_i4","_sort_header","sorted","isSorting","res","_i5","sortFunction","DataStore","sorting","as","sortDir","index","_i6","colspan","_render_header","vConfig","valuesConfig","parts","tmp","_j","join","width","_add_total_columns","text0","readonlyTitle","splice","exportAsTree","arr","h","found","totalCols","copy","math","replace","_correct_colspan","first","_get_key_leaves","result","leaves","op","_operationOptions","leavesOnly","Math","round","$cellCss","max_value","min_value","window","indexOf","_j2","_j3","args","addOperation","method","fields_hash","getIdByIndex","uid","str","_i7","_field","_i8","_field2","_i9","_field3","_i10","_field4","_text","_i11","_field5","init","filterItem","setStructure","getStructure","getConfigWindow","profile_setter","console","time","timeEnd","delay","layout","DataLoader","EventSystem","Settings","numHelper","fvalue","func","isDate","parseFormatStr","trim","substr","rules","equal","not_equal","more_equal","more","less_equal","less","range","range_inc","multi","contains","fvalues","datafilter","pivotSumColumn","refresh","master","node","mapCells","columnId","$level","firstChild","innerHTML","summColumn","padding","height","cancelButtonWidth","applyButtonWidth","fieldsColumnWidth","head","modal","move","css","_popup_templates","popupHeaders","scroll","drag","onBeforeDropOut","_check_values_drag","icon","popupIconHeaders","onClick","webix_pivot_link","_filter_selector","onBeforeDrop","_copy_filter_field","_check_filter_drag","iconContent","_function_template","_function_selector","webix_pivot_plus","_function_add","webix_pivot_minus","_function_remove","_copy_values_field","ctx","from","to","source","remove","each","add","start","lists","sameItem","innerId","ops","locale","e","func_selector","autofit","locate","sel","updateItem","close","els","getItemNode","childNodes","getAttribute","selector","data_setter","filter","editButtonWidth","color","chart","singleLegendItem","palette","templates","groupNameToStr","groupNameToObject","seriesTitle","_capitalize","templates_setter","chartMap","border","alpha","radius","borderColor","fill","disableItems","chartMap_setter","getUI","arguments","align","inputWidth","tooltip","_applyLocale","click","paddingY","paddingX","margin","maxHeight","pivotPopup","scale","_valueLength","_valueFields","mode","_processFilters","_setFilterEvents","_initFilters","_setChartConfig","_loadFilteredData","mapConfig","xAxis","yAxis","top","_getSeries","series","legend","scheme","$group","_pivot_group","$sort","by","removeAllSeries","charAt","toUpperCase","_applyMap","capitalize","stringResult","_distinctValues","shift","silent","_filterItem","getRange","_setFilterValue","legendTitle","map","valign","marker","series_names","_getColor","sConfig","rowIndex","parseInt","columnIndex","_processLegend","addGroupMethod","GroupMethods","removeGroupMethod","groupMethods_setter","valueNameHash","_getUI","_afterInit","chartTypeLabelWidth","chartTypeWidth","logScaleLabelWidth","chartTypes","types","_skipValueDrag","_checkValueDrag","onBeforeDrag","_hidePopups","gravity","webix_link_selection","_filterSelector","webix_link_title","webix_color_selection","_function_color","_copyValueField","yCount","_changeGroupby","_increaseColorIndex","getFirstId","alert","colorboard","getBody","temp"],"mappings":"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","file":"pivot.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/codebase/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(11);\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\t\"use strict\";\n\n/***/ },\n/* 4 */,\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\twebix.i18n.pivot = webix.extend(webix.i18n.pivot || {}, {\n\t    apply: \"Apply\",\n\t    bar: \"Bar\",\n\t    cancel: \"Cancel\",\n\t    chartType: \"Chart type\",\n\t    columns: \"Columns\",\n\t    count: \"count\",\n\t    date: \"date\",\n\t    fields: \"Fields\",\n\t    filters: \"Filters\",\n\t    groupBy: \"Group By\",\n\t    line: \"Line\",\n\t    logScale: \"Logarithmic scale\",\n\t    max: \"max\",\n\t    min: \"min\",\n\t    multiselect: \"multi-select\",\n\t    operationNotDefined: \"Operation is not defined\",\n\t    layoutIncorrect: \"pivotLayout should be an Array instance\",\n\t    pivotMessage: \"[Click to configure]\",\n\t    popupHeader: \"Pivot Settings\",\n\t    radar: \"Radar\",\n\t    radarArea: \"Area Radar\",\n\t    rows: \"Rows\",\n\t    select: \"select\",\n\t    settings: \"Settings\",\n\t    stackedBar: \"Stacked Bar\",\n\t    sum: \"sum\",\n\t    text: \"text\",\n\t    total: \"Total\",\n\t    values: \"Values\",\n\t    valuesNotDefined: \"Values or Group field are not defined\",\n\t    windowTitle: \"Pivot Configuration\",\n\t    windowMessage: \"move fields into a required sector\"\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\twebix.protoUI({\n\t    name: \"webix_pivot_popup\",\n\t    _selected: null,\n\t    $init: function $init(config) {\n\t        webix.extend(config, this._get_ui(config));\n\t        this.$ready.push(this._after_init);\n\t    },\n\t    _get_ui: function _get_ui(config) {\n\t        return {\n\t            body: {\n\t                id: \"list\", view: \"list\", borderless: true, autoheight: true, template: \"#title#\", data: config.data\n\t            }\n\t        };\n\t    },\n\t    _after_init: function _after_init() {\n\t        this.attachEvent(\"onItemClick\", function (id) {\n\t            this._selected = this.$eventSource.getItem(id);\n\t            this.hide();\n\t        });\n\t    },\n\t    getSelected: function getSelected() {\n\t        return this._selected;\n\t    }\n\t}, webix.ui.popup, webix.IdSpace);\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _filters = __webpack_require__(8);\n\t\n\tvar flt = _interopRequireWildcard(_filters);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(10);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\t\n\twebix.protoUI({\n\t\tname: \"pivot\",\n\t\tversion: \"{{version}}\",\n\t\tdefaults: {\n\t\t\tfieldMap: {},\n\t\t\tyScaleWidth: 300,\n\t\t\tcolumnWidth: 150,\n\t\t\tfilterLabelAlign: \"right\",\n\t\t\tfilterWidth: 300,\n\t\t\tfilterMinWidth: 150,\n\t\t\tfilterLabelWidth: 100\n\t\n\t\t},\n\t\t$divider: \"_'_\",\n\t\t$init: function $init(config) {\n\t\t\tif (!config.structure) config.structure = {};\n\t\t\twebix.extend(config.structure, { rows: [], columns: [], values: [], filters: [] });\n\t\n\t\t\tthis.$view.className += \" webix_pivot\";\n\t\t\twebix.extend(config, this._get_ui(config));\n\t\t\tthis.$ready.push(this.render);\n\t\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(function () {\n\t\t\t\t// call render if pivot is initialized\n\t\t\t\tif (this.$$(\"data\")) this.render();\n\t\t\t}, this));\n\t\t},\n\t\t_get_ui: function _get_ui(config) {\n\t\t\tvar filters = { id: \"filters\", view: \"toolbar\", hidden: true, cols: [{}] };\n\t\n\t\t\tvar table = {\n\t\t\t\tview: \"treetable\",\n\t\t\t\tid: \"data\",\n\t\t\t\tselect: \"row\",\n\t\t\t\tnavigation: true,\n\t\t\t\tleftSplit: 1,\n\t\t\t\tresizeColumn: true,\n\t\t\t\ton: {\n\t\t\t\t\t\"onHeaderClick\": function onHeaderClick(id) {\n\t\t\t\t\t\tvar pivot = this.getTopParentView();\n\t\t\t\t\t\tif (this.getColumnIndex(id.column) === 0 && !pivot.config.readonly) pivot.configure();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcolumns: [{}]\n\t\t\t};\n\t\n\t\t\tif (config.datatable && _typeof(config.datatable) == \"object\") {\n\t\t\t\tdelete config.datatable.id;\n\t\t\t\twebix.extend(table, config.datatable, true);\n\t\t\t}\n\t\n\t\t\treturn { rows: [filters, table] };\n\t\t},\n\t\tconfigure: function configure() {\n\t\t\tif (!this._config_popup) {\n\t\t\t\tvar config = { view: \"webix_pivot_config\", operations: [], pivot: this.config.id };\n\t\t\t\twebix.extend(config, this.config.popup || {});\n\t\t\t\tthis._config_popup = webix.ui(config);\n\t\t\t\tthis.callEvent(\"onPopup\", [this._config_popup]);\n\t\t\t\tthis._config_popup.attachEvent(\"onApply\", webix.bind(function (structure) {\n\t\t\t\t\tthis.define(\"structure\", structure);\n\t\t\t\t\tthis.render();\n\t\t\t\t}, this));\n\t\t\t}\n\t\n\t\t\tvar functions = [];\n\t\t\tfor (var i in this.operations) {\n\t\t\t\tfunctions.push({ name: i, title: this._apply_locale(i) });\n\t\t\t}this._config_popup.define(\"operations\", functions);\n\t\t\tvar pos = webix.html.offset(this.$$(\"data\").getNode());\n\t\t\tthis._config_popup.setPosition(pos.x + 10, pos.y + 10);\n\t\t\tthis._config_popup.define(\"data\", this.getFields());\n\t\t\tthis._config_popup.show();\n\t\t},\n\t\n\t\trender: function render(without_filters) {\n\t\t\tvar data = this._process_data(this.data.pull, this.data.order);\n\t\n\t\t\tif (this.config.footer) this._add_footer(data.header);\n\t\n\t\t\tif (!without_filters) {\n\t\t\t\tdata.filters = this._process_filters();\n\t\t\t}\n\t\n\t\t\tthis.callEvent(\"onBeforeRender\", [data]);\n\t\n\t\t\tif (data.filters) {\n\t\t\t\tvar filters = data.filters;\n\t\t\t\tif (filters.length > 0) {\n\t\t\t\t\tthis.$$(\"filters\").show();\n\t\t\t\t\tthis.$$(\"filters\").define(\"cols\", filters);\n\t\t\t\t\tthis._filter_events();\n\t\t\t\t} else {\n\t\t\t\t\tthis.$$(\"filters\").hide();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.config.totalColumn) this.$$(\"data\").define(\"math\", true);\n\t\n\t\t\tthis.$$(\"data\").config.columns = data.header;\n\t\n\t\t\tthis.$$(\"data\").refreshColumns();\n\t\t\tthis.$$(\"data\").clearAll();\n\t\t\tthis.$$(\"data\").parse(data.data);\n\t\t},\n\t\t_add_footer: function _add_footer(columns) {\n\t\t\tvar config, grid, i, names;\n\t\n\t\t\tgrid = this.$$(\"data\");\n\t\t\tgrid.define(\"footer\", true);\n\t\n\t\t\tif (columns.length) columns[0].footer = this._apply_locale(\"total\");\n\t\n\t\t\tfor (i = 1; i < columns.length; i++) {\n\t\t\t\tconfig = null;\n\t\n\t\t\t\tif (this.config.footer == \"sumOnly\") {\n\t\t\t\t\tnames = columns[i].id.split(this.$divider);\n\t\t\t\t\tif (names[names.length - 2] != \"sum\") config = \" \";\n\t\t\t\t}\n\t\n\t\t\t\tif (!config) config = {\n\t\t\t\t\tcontent: \"pivotSumColumn\",\n\t\t\t\t\ttemplate: webix.bind(function (data) {\n\t\t\t\t\t\tvar value = data.value;\n\t\t\t\t\t\treturn value && value != \"0\" && !this.format ? parseFloat(value).toFixed(3) : value;\n\t\t\t\t\t}, columns[i])\n\t\t\t\t};\n\t\n\t\t\t\tcolumns[i].footer = config;\n\t\n\t\t\t\tif (_typeof(this.config.footer) == \"object\") {\n\t\t\t\t\twebix.extend(columns[i].footer, this.config.footer, true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t$exportView: function $exportView(options) {\n\t\t\twebix.extend(options, { filterHTML: true });\n\t\t\treturn this.$$(\"data\");\n\t\t},\n\t\t_apply_locale: function _apply_locale(value) {\n\t\t\treturn webix.i18n.pivot[value] || value;\n\t\t},\n\t\t_apply_map: function _apply_map(value) {\n\t\t\treturn this.config.fieldMap[value] || value;\n\t\t},\n\t\t_process_filters: function _process_filters() {\n\t\t\tvar filters = this.config.structure.filters || [];\n\t\t\tvar items = [];\n\t\t\tfor (var i = 0; i < filters.length; i++) {\n\t\t\t\tvar f = filters[i];\n\t\t\t\tvar item = { value: f.value, label: this._apply_map(f.name), field: f.name, view: f.type,\n\t\t\t\t\tlabelAlign: this.config.filterLabelAlign, labelWidth: this.config.filterLabelWidth, minWidth: this.config.filterMinWidth, maxWidth: this.config.filterWidth\n\t\t\t\t};\n\t\t\t\tif (f.type == \"select\" || f.type == \"multiselect\") item.options = this._distinct_values(f.name, f.type != \"multiselect\");\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t\treturn items;\n\t\t},\n\t\n\t\t_distinct_values: function _distinct_values(field, empty) {\n\t\t\tvar values = [];\n\t\t\tif (empty) values.push({ value: \"\", id: \"\" });\n\t\t\tvar data = this.data.pull;\n\t\t\tvar hash = {};\n\t\t\tfor (var obj in data) {\n\t\t\t\tvar value = data[obj][field];\n\t\t\t\tif (!webix.isUndefined(value)) {\n\t\t\t\t\tif (!hash[value]) {\n\t\t\t\t\t\tvalues.push({ value: value, id: value });\n\t\t\t\t\t\thash[value] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar isNumeric = function isNumeric(n) {\n\t\t\t\treturn !isNaN(parseFloat(n));\n\t\t\t};\n\t\t\tvalues.sort(function (a, b) {\n\t\t\t\tvar val1 = a.value;\n\t\t\t\tvar val2 = b.value;\n\t\t\t\tif (!val2) return 1;\n\t\t\t\tif (!val1) return -1;\n\t\t\t\tif (!isNumeric(val1) || !isNumeric(val2)) {\n\t\t\t\t\tval1 = val1.toString().toLowerCase();\n\t\t\t\t\tval2 = val2.toString().toLowerCase();\n\t\t\t\t}\n\t\t\t\treturn val1 > val2 ? 1 : val1 < val2 ? -1 : 0;\n\t\t\t});\n\t\t\treturn values;\n\t\t},\n\t\n\t\t_filter_events: function _filter_events() {\n\t\t\tvar filters = this.$$(\"filters\");\n\t\t\tfilters.reconstruct();\n\t\n\t\t\tvar children = filters.getChildViews();\n\t\t\tvar pivot = this;\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar el = children[i];\n\t\t\t\tif (el.name == \"select\" || el.name == \"multiselect\" || el.name == \"datepicker\") el.attachEvent(\"onChange\", function (newvalue) {\n\t\t\t\t\tpivot._set_filter_value(this.config.field, newvalue);\n\t\t\t\t});else el.attachEvent(\"onTimedKeyPress\", function () {\n\t\t\t\t\tpivot._set_filter_value(this.config.field, this.getValue());\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\n\t\t_set_filter_value: function _set_filter_value(field, value) {\n\t\t\tvar filters = this.config.structure.filters;\n\t\t\tfor (var i = 0; i < filters.length; i++) {\n\t\t\t\tif (filters[i].name == field) {\n\t\t\t\t\tfilters[i].value = value;\n\t\t\t\t\tthis.render(true);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}return false;\n\t\t},\n\t\n\t\t_process_data: function _process_data(data, order) {\n\t\t\tthis._init_filters();\n\t\n\t\t\tvar structure = this.config.structure;\n\t\t\tstructure._header = [];\n\t\t\tstructure._header_hash = {};\n\t\n\t\t\tfor (var i = 0; i < structure.values.length; i++) {\n\t\t\t\tstructure.values[i].operation = structure.values[i].operation || [\"sum\"];\n\t\t\t\tif (!webix.isArray(structure.values[i].operation)) structure.values[i].operation = [structure.values[i].operation];\n\t\t\t}\n\t\t\tvar columns = [];\n\t\n\t\t\tfor (var _i = 0; _i < structure.columns.length; _i++) {\n\t\t\t\tcolumns[_i] = _typeof(structure.columns[_i]) == \"object\" ? structure.columns[_i].id || _i : structure.columns[_i];\n\t\t\t}\n\t\n\t\t\tvar fields = structure.rows.concat(columns);\n\t\n\t\t\tvar items = this._group(data, order, fields);\n\t\t\tvar header = {};\n\t\t\tif (structure.rows.length > 0) items = this._process_rows(items, structure.rows, structure, header);else {\n\t\t\t\t// there are no rows in structure, only columns and values\n\t\t\t\tthis._process_columns(items, columns, structure, header);\n\t\t\t\titems = [];\n\t\t\t}\n\t\t\theader = this._process_header(header);\n\t\t\treturn { header: header, data: items };\n\t\t},\n\t\t_groupItem: function _groupItem(hash, item, fields) {\n\t\t\tif (fields.length) {\n\t\t\t\tvar value = item[fields[0]];\n\t\t\t\tif (webix.isUndefined(hash[value])) hash[value] = {};\n\t\t\t\tthis._groupItem(hash[value], item, fields.slice(1));\n\t\t\t} else hash[item.id] = item;\n\t\t},\n\t\t_group: function _group(data, order, fields) {\n\t\t\tvar id,\n\t\t\t    item,\n\t\t\t    i,\n\t\t\t    j,\n\t\t\t    value,\n\t\t\t    hash = {};\n\t\n\t\t\tfor (i = 0; i < order.length; i++) {\n\t\t\t\tid = order[i];\n\t\t\t\titem = data[id];\n\t\t\t\tif (item && this._filter_item(item)) {\n\t\t\t\t\tthis._groupItem(hash, item, fields);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn hash;\n\t\t},\n\t\t_process_rows: function _process_rows(data, rows, structure, header) {\n\t\t\tvar items = [];\n\t\t\tif (rows.length > 1) {\n\t\t\t\tfor (var i in data) {\n\t\t\t\t\tdata[i] = this._process_rows(data[i], rows.slice(1), structure, header);\n\t\t\t\t}var values = structure._header;\n\t\n\t\t\t\tfor (var _i2 in data) {\n\t\t\t\t\tvar item = { data: data[_i2] };\n\t\t\t\t\tfor (var j = 0; j < item.data.length; j++) {\n\t\t\t\t\t\tfor (var k = 0; k < values.length; k++) {\n\t\t\t\t\t\t\tvar value = values[k];\n\t\t\t\t\t\t\tif (webix.isUndefined(item[value])) item[value] = [];\n\t\t\t\t\t\t\titem[value].push(item.data[j][value]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\titem = this._calculate_item(item, structure);\n\t\t\t\t\titem = this._minmax_in_row(item, structure);\n\t\t\t\t\titem.name = _i2;\n\t\t\t\t\titem.open = true;\n\t\t\t\t\titems.push(item);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var _i3 in data) {\n\t\t\t\t\tvar _item = this._process_columns(data[_i3], this.config.structure.columns, structure, header);\n\t\t\t\t\t_item.name = _i3;\n\t\t\t\t\t_item = this._calculate_item(_item, structure);\n\t\t\t\t\t_item = this._minmax_in_row(_item, structure);\n\t\t\t\t\titems.push(_item);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn items;\n\t\t},\n\t\n\t\t_process_columns: function _process_columns(data, columns, structure, header, item, name) {\n\t\t\tvar vname;\n\t\t\titem = item || {};\n\t\t\tif (columns.length > 0) {\n\t\t\t\tname = name || \"\";\n\t\t\t\tfor (var i in data) {\n\t\t\t\t\tif (!header[i]) header[i] = {};\n\t\t\t\t\tdata[i] = this._process_columns(data[i], columns.slice(1), structure, header[i], item, (name.length > 0 ? name + this.$divider : \"\") + i);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar values = this.config.structure.values;\n\t\t\t\tfor (var id in data) {\n\t\t\t\t\tfor (var _i4 = 0; _i4 < values.length; _i4++) {\n\t\t\t\t\t\tfor (var j = 0; j < values[_i4].operation.length; j++) {\n\t\t\t\t\t\t\tif (name) vname = name + this.$divider + values[_i4].operation[j] + this.$divider + values[_i4].name;else // if no columns\n\t\t\t\t\t\t\t\tvname = values[_i4].operation[j] + this.$divider + values[_i4].name;\n\t\t\t\t\t\t\tif (!structure._header_hash[vname]) {\n\t\t\t\t\t\t\t\tstructure._header.push(vname);\n\t\t\t\t\t\t\t\tstructure._header_hash[vname] = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (webix.isUndefined(item[vname])) {\n\t\t\t\t\t\t\t\titem[vname] = [];\n\t\t\t\t\t\t\t\theader[values[_i4].operation[j] + this.$divider + values[_i4].name] = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem[vname].push(data[id][values[_i4].name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn item;\n\t\t},\n\t\t_sort_header: function _sort_header(header) {\n\t\t\tvar columns = this.config.structure.columns;\n\t\t\tvar sorted = false;\n\t\n\t\t\tvar isSorting = false;\n\t\t\tfor (var i = 0; i < columns.length && !isSorting; i++) {\n\t\t\t\tif (_typeof(columns[i]) == \"object\" && columns[i].sort) isSorting = true;\n\t\t\t}\n\t\t\tif (!isSorting) return false;\n\t\n\t\t\theader.sort(function (a, b) {\n\t\t\t\tvar order = null;\n\t\t\t\tvar res;\n\t\t\t\tfor (var _i5 = 0; _i5 < columns.length && order === null; _i5++) {\n\t\t\t\t\tvar c = columns[_i5];\n\t\t\t\t\tif ((typeof c === \"undefined\" ? \"undefined\" : _typeof(c)) == \"object\" && c.sort) {\n\t\n\t\t\t\t\t\tvar sortFunction = c.sort;\n\t\t\t\t\t\tif (typeof c.sort == \"string\") sortFunction = webix.DataStore.prototype.sorting.as[c.sort];\n\t\t\t\t\t\tres = sortFunction(a[_i5].text, b[_i5].text);\n\t\n\t\t\t\t\t\tif (res || _i5 == columns.length - 1) {\n\t\t\t\t\t\t\tsorted = true;\n\t\t\t\t\t\t\tif (c.sortDir == \"desc\") {\n\t\t\t\t\t\t\t\tres = res * -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\torder = res;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else order = 0;\n\t\t\t\t}\n\t\t\t\treturn order;\n\t\t\t});\n\t\n\t\t\tif (header[0]) {\n\t\t\t\tvar j = header[0].length - 2;\n\t\t\t\twhile (j >= 0) {\n\t\t\t\t\tvar text = \"\";\n\t\t\t\t\tvar index = 0;\n\t\t\t\t\tfor (var _i6 = 0; _i6 < header.length; _i6++) {\n\t\t\t\t\t\tif (text != header[_i6][j].text) {\n\t\t\t\t\t\t\tindex = _i6;\n\t\t\t\t\t\t\ttext = header[_i6][j].text;\n\t\t\t\t\t\t\theader[_i6][j].colspan = 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete header[_i6][j].colspan;\n\t\t\t\t\t\t\theader[index][j].colspan++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tj--;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_process_header: function _process_header(header) {\n\t\t\theader = this._render_header(header);\n\t\n\t\t\tthis._sort_header(header);\n\t\t\tvar vConfig,\n\t\t\t    valuesConfig = this.config.structure.values;\n\t\n\t\t\tfor (var i = 0; i < header.length; i++) {\n\t\t\t\tvar parts = [];\n\t\t\t\tfor (var j = 0; j < header[i].length; j++) {\n\t\t\t\t\tparts.push(header[i][j].name);\n\t\t\t\t} // find value configuration\n\t\t\t\tvConfig = null;\n\t\t\t\tvar tmp = parts[parts.length - 1].split(this.$divider);\n\t\t\t\tfor (var _j = 0; _j < valuesConfig.length && !vConfig; _j++) {\n\t\t\t\t\tif (valuesConfig[_j].operation) for (var p = 0; p < valuesConfig[_j].operation.length; p++) {\n\t\t\t\t\t\tif (valuesConfig[_j].name == tmp[1] && valuesConfig[_j].operation[p] == tmp[0]) {\n\t\t\t\t\t\t\tvConfig = valuesConfig[_j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\theader[i] = { id: parts.join(this.$divider), header: header[i], sort: \"int\", width: this.config.columnWidth };\n\t\t\t\t// add format\n\t\t\t\tif (vConfig && vConfig.format) header[i].format = vConfig.format;\n\t\t\t}\n\t\n\t\t\tthis.callEvent(\"onHeaderInit\", [header]);\n\t\n\t\t\tif (this.config.totalColumn && header.length) {\n\t\t\t\theader = this._add_total_columns(header);\n\t\t\t}\n\t\n\t\t\tvar text0 = \"<div class='webix_pivot_config_msg'>\" + webix.i18n.pivot.pivotMessage + \"</div>\";\n\t\n\t\t\tif (this.config.readonly) {\n\t\t\t\ttext0 = this.config.readonlyTitle || \"\";\n\t\t\t\tthis.$$(\"data\").$view.className += \" webix_pivot_readonly\";\n\t\t\t}\n\t\t\theader.splice(0, 0, { id: \"name\", exportAsTree: true, template: \"{common.treetable()} #name#\", header: { text: text0 }, width: this.config.yScaleWidth });\n\t\n\t\t\treturn header;\n\t\t},\n\t\t_add_total_columns: function _add_total_columns(header) {\n\t\t\tvar arr,\n\t\t\t    h,\n\t\t\t    i,\n\t\t\t    j,\n\t\t\t    found = false,\n\t\t\t    index = 0,\n\t\t\t    totalCols = [];\n\t\n\t\t\t// if no columns in selected\n\t\t\tif (header[0].header.length < 2) return header;\n\t\n\t\t\ti = header.length - 1;\n\t\n\t\t\twhile (!found && i) {\n\t\t\t\tif (header[i].header[0].name != header[i - 1].header[0].name) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tindex = i;\n\t\t\t\t}\n\t\t\t\ti--;\n\t\t\t}\n\t\t\tvar c = 0;\n\t\t\tfor (i = index; i < header.length; i++) {\n\t\t\t\th = webix.copy(header[i]);\n\t\t\t\tarr = [];\n\t\t\t\tfound = true;\n\t\t\t\tif (this.config.totalColumn == \"sumOnly\") {\n\t\t\t\t\tvar parts = h.id.split(this.$divider);\n\t\t\t\t\tvar operation = parts[parts.length - 2];\n\t\t\t\t\tif (operation != \"sum\") found = false;\n\t\t\t\t}\n\t\t\t\tif (found) {\n\t\t\t\t\tfor (j = c + 1; j < header.length + 1; j += header.length - index) {\n\t\t\t\t\t\tarr.push(\"[$r,:\" + j + \"]\");\n\t\t\t\t\t}\n\t\t\t\t\th.math = arr.join(\"+\");\n\t\n\t\t\t\t\tif (!h.format) h.format = function (value) {\n\t\t\t\t\t\treturn value && value != \"0\" ? parseFloat(value).toFixed(3) : value;\n\t\t\t\t\t};\n\t\n\t\t\t\t\tif (_typeof(this.config.totalColumn) == \"object\") {\n\t\t\t\t\t\twebix.extend(h, this.config.totalColumn, true);\n\t\t\t\t\t}\n\t\n\t\t\t\t\th.id = h.id.replace(h.header[0].name, \"$webixtotal\");\n\t\t\t\t\th.header[0].name = \"total\";\n\t\t\t\t\th.header[0].text = this._apply_locale(\"total\");\n\t\t\t\t\ttotalCols.push(h);\n\t\t\t\t}\n\t\n\t\t\t\tc++;\n\t\t\t}\n\t\t\ttotalCols = this._correct_colspan(totalCols);\n\t\t\treturn header.concat(totalCols);\n\t\t},\n\t\t_correct_colspan: function _correct_colspan(header) {\n\t\t\tif (header[0]) {\n\t\t\t\tvar j = header[0].header.length - 2;\n\t\t\t\twhile (j >= 0) {\n\t\t\t\t\tvar text = \"\";\n\t\t\t\t\tvar index = 0;\n\t\t\t\t\tfor (var i = 0; i < header.length; i++) {\n\t\t\t\t\t\tif (text != header[i].header[j].text) {\n\t\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\t\ttext = header[i].header[j].text;\n\t\t\t\t\t\t\theader[i].header[j].colspan = 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete header[i].header[j].colspan;\n\t\t\t\t\t\t\theader[index].header[j].colspan++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tj--;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn header;\n\t\t},\n\t\t_render_header: function _render_header(data) {\n\t\n\t\t\tvar header = [];\n\t\n\t\t\tfor (var i in data) {\n\t\n\t\t\t\t// is the last level?\n\t\t\t\tvar empty = true;\n\t\t\t\t//noinspection JSUnusedLocalSymbols\n\t\t\t\tfor (var k in data[i]) {\n\t\t\t\t\tempty = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\n\t\t\t\tif (!empty) {\n\t\t\t\t\tdata[i] = this._render_header(data[i]);\n\t\t\t\t\tvar first = false;\n\t\t\t\t\tfor (var j = 0; j < data[i].length; j++) {\n\t\t\t\t\t\tvar h = data[i][j];\n\t\t\t\t\t\th.splice(0, 0, { name: i, text: i });\n\t\t\t\t\t\tif (!first) {\n\t\t\t\t\t\t\th[0].colspan = data[i].length;\n\t\t\t\t\t\t\tfirst = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\theader.push(h);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar tmp = i.split(this.$divider);\n\t\n\t\t\t\t\tif (tmp.length > 1) {\n\t\t\t\t\t\theader.push([{ name: i, text: this._apply_map(tmp[1]) + \" (\" + this._apply_locale(tmp[0]) + \")\" }]);\n\t\t\t\t\t} else\n\t\t\t\t\t\t// there are no values in structure, only rows and columns\n\t\t\t\t\t\theader.push([{ name: i, text: i }]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn header;\n\t\t},\n\t\t_get_key_leaves: function _get_key_leaves(data, key, result) {\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tif (data[i].data) this._get_key_leaves(data[i].data, key, result);else result.push(data[i][key]);\n\t\t\t}\n\t\t},\n\t\t_calculate_item: function _calculate_item(item, structure) {\n\t\t\tvar i, key, leaves, op, tmp, values;\n\t\n\t\t\tfor (i = 0; i < structure._header.length; i++) {\n\t\t\t\tkey = structure._header[i];\n\t\t\t\ttmp = key.split(this.$divider);\n\t\n\t\t\t\top = tmp[tmp.length - 2];\n\t\n\t\t\t\tvalues = item[key];\n\t\n\t\t\t\tleaves = this._operationOptions[op] && this._operationOptions[op].leavesOnly;\n\t\t\t\tif (leaves && item.data) {\n\t\n\t\t\t\t\tvalues = [];\n\t\t\t\t\tthis._get_key_leaves(item.data, key, values);\n\t\t\t\t}\n\t\t\t\tif (values) {\n\t\t\t\t\tvar data = [];\n\t\n\t\t\t\t\tfor (var j = 0; j < values.length; j++) {\n\t\t\t\t\t\tif (values[j] || values[j] == \"0\") {\n\t\t\t\t\t\t\tdata.push(values[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (data.length) item[key] = this.operations[op].call(this, data, key, item);else item[key] = '';\n\t\t\t\t} else item[key] = '';\n\t\n\t\t\t\tif (item[key]) item[key] = Math.round(item[key] * 100000) / 100000;\n\t\t\t}\n\t\t\treturn item;\n\t\t},\n\t\t_minmax_in_row: function _minmax_in_row(item, structure) {\n\t\t\t// nothing to do\n\t\t\tif (!this.config.min && !this.config.max) return item;\n\t\n\t\t\tvar values = this.config.structure.values;\n\t\t\tif (!item.$cellCss) item.$cellCss = {};\n\t\n\t\t\t// calculating for each value\n\t\t\tfor (var i = 0; i < values.length; i++) {\n\t\t\t\tvar value = values[i];\n\t\n\t\t\t\tvar max = [],\n\t\t\t\t    max_value = -99999999;\n\t\t\t\tvar min = [],\n\t\t\t\t    min_value = 99999999;\n\t\n\t\t\t\tfor (var j = 0; j < structure._header.length; j++) {\n\t\t\t\t\tvar key = structure._header[j];\n\t\t\t\t\tif (window.isNaN(item[key])) continue;\n\t\t\t\t\t// it's a another value\n\t\t\t\t\tif (key.indexOf(value.name, this.length - value.name.length) === -1) continue;\n\t\n\t\t\t\t\tif (this.config.max && item[key] > max_value) {\n\t\t\t\t\t\tmax = [key];\n\t\t\t\t\t\tmax_value = item[key];\n\t\t\t\t\t} else if (item[key] == max_value) {\n\t\t\t\t\t\tmax.push(key);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.config.min && item[key] < min_value) {\n\t\t\t\t\t\tmin = [key];\n\t\t\t\t\t\tmin_value = item[key];\n\t\t\t\t\t} else if (item[key] == min_value) {\n\t\t\t\t\t\tmin.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tfor (var _j2 = 0; _j2 < min.length; _j2++) {\n\t\t\t\t\titem.$cellCss[min[_j2]] = \"webix_min\";\n\t\t\t\t}\n\t\t\t\tfor (var _j3 = 0; _j3 < max.length; _j3++) {\n\t\t\t\t\titem.$cellCss[max[_j3]] = \"webix_max\";\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn item;\n\t\t},\n\t\t_operationOptions: {},\n\t\toperations: {\n\t\t\tsum: function sum(args) {\n\t\t\t\tvar sum = 0;\n\t\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\t\tvar value = args[i];\n\t\t\t\t\tvalue = parseFloat(value, 10);\n\t\t\t\t\tif (!window.isNaN(value)) sum += value;\n\t\t\t\t}\n\t\t\t\treturn sum;\n\t\t\t},\n\t\t\tcount: function count(data, key, item) {\n\t\t\t\tvar count = 0;\n\t\t\t\tif (!item.data) count = data.length;else {\n\t\t\t\t\tfor (var i = 0; i < item.data.length; i++) {\n\t\t\t\t\t\tcount += item.data[i][key] || 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn count;\n\t\t\t},\n\t\t\tmax: function max(args) {\n\t\t\t\tif (args.length == 1) return args[0];\n\t\t\t\treturn Math.max.apply(this, args);\n\t\t\t},\n\t\t\tmin: function min(args) {\n\t\t\t\tif (args.length == 1) return args[0];\n\t\t\t\treturn Math.min.apply(this, args);\n\t\t\t}\n\t\t},\n\t\taddOperation: function addOperation(name, method, options) {\n\t\t\tthis.operations[name] = method;\n\t\t\tif (options) this._operationOptions[name] = options;\n\t\t},\n\t\tgetFields: function getFields() {\n\t\t\tvar fields = [];\n\t\t\tvar fields_hash = {};\n\t\t\tfor (var i = 0; i < Math.min(this.data.count() || 5); i++) {\n\t\t\t\tvar item = this.data.getItem(this.data.getIdByIndex(i));\n\t\t\t\tfor (var field in item) {\n\t\t\t\t\tif (!fields_hash[field]) {\n\t\t\t\t\t\tfields.push(field);\n\t\t\t\t\t\tfields_hash[field] = webix.uid();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tvar str = this.config.structure;\n\t\t\tvar result = { fields: [], rows: [], columns: [], values: [], filters: [] };\n\t\n\t\t\tfor (var _i7 = 0; _i7 < (str.filters || []).length; _i7++) {\n\t\t\t\tvar _field = str.filters[_i7];\n\t\t\t\tif (!webix.isUndefined(fields_hash[_field.name])) {\n\t\t\t\t\tvar text = this._apply_map(_field.name);\n\t\t\t\t\tresult.filters.push({ name: _field.name, text: text, type: _field.type, value: _field.value, id: fields_hash[_field] });\n\t\t\t\t\t//delete fields_hash[field.name]; // filter allows to drag a field multiple times\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var _i8 = 0; _i8 < str.rows.length; _i8++) {\n\t\t\t\tvar _field2 = str.rows[_i8];\n\t\t\t\tif (!webix.isUndefined(fields_hash[_field2])) {\n\t\t\t\t\tresult.rows.push({ name: _field2, text: this._apply_map(_field2), id: fields_hash[_field2] });\n\t\t\t\t\tdelete fields_hash[_field2];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (var _i9 = 0; _i9 < str.columns.length; _i9++) {\n\t\t\t\tvar _field3 = _typeof(str.columns[_i9]) == \"object\" ? str.columns[_i9].id || _i9 : str.columns[_i9];\n\t\t\t\tif (!webix.isUndefined(fields_hash[_field3])) {\n\t\t\t\t\tresult.columns.push({ name: _field3, text: this._apply_map(_field3), id: fields_hash[_field3] });\n\t\t\t\t\tdelete fields_hash[_field3];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (var _i10 = 0; _i10 < str.values.length; _i10++) {\n\t\t\t\tvar _field4 = str.values[_i10];\n\t\t\t\tif (!webix.isUndefined(fields_hash[_field4.name])) {\n\t\t\t\t\tvar _text = this._apply_map(_field4.name);\n\t\t\t\t\tresult.values.push({ name: _field4.name, text: _text, operation: _field4.operation, id: fields_hash[_field4.name] });\n\t\t\t\t\t//delete fields_hash[field.name];   // values allows to drag a field multiple times\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (var _i11 = 0; _i11 < fields.length; _i11++) {\n\t\t\t\tvar _field5 = fields[_i11];\n\t\t\t\tif (!webix.isUndefined(fields_hash[_field5])) result.fields.push({ name: _field5, text: this._apply_map(_field5), id: fields_hash[_field5] });\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_init_filters: function _init_filters() {\n\t\t\tvar filters = this.config.structure.filters || [];\n\t\t\tflt.init(filters);\n\t\t},\n\t\t_filter_item: function _filter_item(item) {\n\t\t\tvar filters = this.config.structure.filters || [];\n\t\t\treturn flt.filterItem(filters, item);\n\t\t},\n\t\tsetStructure: function setStructure(config) {\n\t\t\tthis.define(\"structure\", config);\n\t\t\tthis.render();\n\t\t},\n\t\tgetStructure: function getStructure() {\n\t\t\treturn this.config.structure;\n\t\t},\n\t\tgetConfigWindow: function getConfigWindow() {\n\t\t\treturn this._config_popup;\n\t\t},\n\t\tprofile_setter: function profile_setter(value) {\n\t\t\tvar c = window.console;\n\t\t\tif (value) {\n\t\t\t\tthis.attachEvent(\"onBeforeLoad\", function () {\n\t\t\t\t\tc.time(\"data loading\");\n\t\t\t\t});\n\t\t\t\tthis.data.attachEvent(\"onParse\", function () {\n\t\t\t\t\tc.timeEnd(\"data loading\");c.time(\"data parsing\");\n\t\t\t\t});\n\t\t\t\tthis.data.attachEvent(\"onStoreLoad\", function () {\n\t\t\t\t\tc.timeEnd(\"data parsing\");c.time(\"data processing\");\n\t\t\t\t});\n\t\t\t\tthis.$ready.push(function () {\n\t\t\t\t\tthis.$$(\"data\").attachEvent(\"onBeforeRender\", function () {\n\t\t\t\t\t\tif (this.count()) {\n\t\t\t\t\t\t\tc.timeEnd(\"data processing\");c.time(\"data rendering\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.$$(\"data\").attachEvent(\"onAfterRender\", function () {\n\t\t\t\t\t\tif (this.count()) webix.delay(function () {\n\t\t\t\t\t\t\tc.timeEnd(\"data rendering\");\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, webix.IdSpace, webix.ui.layout, webix.DataLoader, webix.EventSystem, webix.Settings);\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\texports.init = init;\n\texports.filterItem = filterItem;\n\tfunction numHelper(fvalue, value, func) {\n\t    if ((typeof fvalue === \"undefined\" ? \"undefined\" : _typeof(fvalue)) == \"object\") {\n\t        for (var i = 0; i < fvalue.length; i++) {\n\t            fvalue[i] = window.parseFloat(fvalue[i]);\n\t            if (window.isNaN(fvalue[i])) return true;\n\t        }\n\t    } else {\n\t        fvalue = window.parseFloat(fvalue);\n\t        // if filter value is not a number then ignore such filter\n\t        if (window.isNaN(fvalue)) return true;\n\t    }\n\t    // if row value is not a number then don't show this row\n\t    if (window.isNaN(value)) return false;\n\t    return func(fvalue, value);\n\t}\n\t\n\tvar rules = exports.rules = {\n\t    contains: function contains(fvalue, value) {\n\t        return value.indexOf(fvalue.toString().toLowerCase()) >= 0;\n\t    },\n\t    equal: function equal(fvalue, value) {\n\t        return numHelper(fvalue, value, function (fvalue, value) {\n\t            return fvalue == value;\n\t        });\n\t    },\n\t    not_equal: function not_equal(fvalue, value) {\n\t        return numHelper(fvalue, value, function (fvalue, value) {\n\t            return fvalue != value;\n\t        });\n\t    },\n\t    less: function less(fvalue, value) {\n\t        return numHelper(fvalue, value, function (fvalue, value) {\n\t            return value < fvalue;\n\t        });\n\t    },\n\t    less_equal: function less_equal(fvalue, value) {\n\t        return numHelper(fvalue, value, function (fvalue, value) {\n\t            return value <= fvalue;\n\t        });\n\t    },\n\t    more: function more(fvalue, value) {\n\t        return numHelper(fvalue, value, function (fvalue, value) {\n\t            return value > fvalue;\n\t        });\n\t    },\n\t    more_equal: function more_equal(fvalue, value) {\n\t        return numHelper(fvalue, value, function (fvalue, value) {\n\t            return value >= fvalue;\n\t        });\n\t    },\n\t    multi: function multi(fvalues, value) {\n\t        var result = false;\n\t        fvalues = fvalues.split(\",\");\n\t        for (var i = 0; i < fvalues.length; i++) {\n\t            result = result || value.indexOf(fvalues[i].toString().toLowerCase()) >= 0;\n\t        }\n\t        return result;\n\t    },\n\t    range: function range(fvalue, value) {\n\t        return numHelper(fvalue, value, function (fvalue, value) {\n\t            return value < fvalue[1] && value >= fvalue[0];\n\t        });\n\t    },\n\t    range_inc: function range_inc(fvalue, value) {\n\t        return numHelper(fvalue, value, function (fvalue, value) {\n\t            return value <= fvalue[1] && value >= fvalue[0];\n\t        });\n\t    }\n\t};\n\t\n\tfunction init(filters) {\n\t    for (var i = 0; i < filters.length; i++) {\n\t        var f = filters[i];\n\t\n\t        var fvalue = f.value || \"\";\n\t        if (webix.isDate(fvalue)) {\n\t            fvalue = webix.i18n.parseFormatStr(fvalue);\n\t        } else if (typeof fvalue == \"string\") {\n\t            if (fvalue.trim) fvalue = fvalue.trim();\n\t        }\n\t\n\t        if (fvalue.substr(0, 1) == \"=\") {\n\t            f.func = rules.equal;\n\t            fvalue = fvalue.substr(1);\n\t        } else if (fvalue.substr(0, 2) == \"<>\") {\n\t            f.func = rules.not_equal;\n\t            fvalue = fvalue.substr(2);\n\t        } else if (fvalue.substr(0, 2) == \">=\") {\n\t            f.func = rules.more_equal;\n\t            fvalue = fvalue.substr(2);\n\t        } else if (fvalue.substr(0, 1) == \">\") {\n\t            f.func = rules.more;\n\t            fvalue = fvalue.substr(1);\n\t        } else if (fvalue.substr(0, 2) == \"<=\") {\n\t            f.func = rules.less_equal;\n\t            fvalue = fvalue.substr(2);\n\t        } else if (fvalue.substr(0, 1) == \"<\") {\n\t            f.func = rules.less;\n\t            fvalue = fvalue.substr(1);\n\t        } else if (fvalue.indexOf(\"...\") > 0) {\n\t            f.func = rules.range;\n\t            fvalue = fvalue.split(\"...\");\n\t        } else if (fvalue.indexOf(\"..\") > 0) {\n\t            f.func = rules.range_inc;\n\t            fvalue = fvalue.split(\"..\");\n\t        } else if (f.type == \"multiselect\") {\n\t            f.func = rules.multi;\n\t        } else if (f.type == \"datepicker\") {\n\t            f.func = function (fvalue, value) {\n\t                return fvalue == value;\n\t            };\n\t        } else f.func = rules.contains;\n\t\n\t        f.fvalue = fvalue;\n\t    }\n\t}\n\t\n\tfunction filterItem(filters, item) {\n\t    for (var i = 0; i < filters.length; i++) {\n\t        var f = filters[i];\n\t        if (f.fvalue) {\n\t            if (webix.isUndefined(item[f.name])) return false;\n\t\n\t            var value = item[f.name].toString().toLowerCase();\n\t            var result = f.func(f.fvalue, value);\n\t\n\t            if (!result) return false;\n\t        }\n\t    }\n\t    return true;\n\t}\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\twebix.ui.datafilter.pivotSumColumn = webix.extend({\n\t    refresh: function refresh(master, node, value) {\n\t        var result = 0;\n\t        master.mapCells(null, value.columnId, null, 1, function (value, id) {\n\t            if (!isNaN(value) && master.getItem(id).$level == 1) result += value * 1;\n\t            return value;\n\t        });\n\t\n\t        if (value.format) result = value.format(result);\n\t        if (value.template) result = value.template({ value: result });\n\t\n\t        node.firstChild.innerHTML = result;\n\t    }\n\t}, webix.ui.datafilter.summColumn);\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\twebix.protoUI({\n\t    name: \"webix_pivot_config\",\n\t\n\t    $init: function $init(config) {\n\t        this.$view.className += \" webix_popup webix_pivot\";\n\t        webix.extend(config, this.defaults);\n\t        webix.extend(config, this._get_ui(config));\n\t        this.$ready.push(this._after_init);\n\t    },\n\t    defaults: {\n\t        padding: 8,\n\t        height: 500,\n\t        width: 700,\n\t        cancelButtonWidth: 100,\n\t        applyButtonWidth: 100,\n\t        fieldsColumnWidth: 180,\n\t        head: false,\n\t        modal: true,\n\t        move: true\n\t    },\n\t    _get_ui: function _get_ui(config) {\n\t        return {\n\t            head: {\n\t                /*type: \"space\",\n\t                 margin: 5,\n\t                 padding: 5,\n\t                 borderless: true,*/\n\t                view: \"toolbar\",\n\t                //height: 45,\n\t                cols: [{ id: \"config_title\", view: \"label\", label: webix.i18n.pivot.windowTitle || \"\" }, { view: \"button\", id: \"cancel\", label: webix.i18n.pivot.cancel, width: config.cancelButtonWidth }, { view: \"button\", id: \"apply\", type: \"form\", label: webix.i18n.pivot.apply, width: config.applyButtonWidth }]\n\t            },\n\t            body: {\n\t                type: \"wide\",\n\t                //  margin: 5,\n\t                rows: [{\n\t                    //type: \"wide\",\n\t\n\t                    cols: [\n\t                    // {width:1},\n\t                    {\n\t                        width: config.fieldsColumnWidth,\n\t\n\t                        rows: [{ id: \"fieldsHeader\", data: { value: \"fields\" }, css: \"webix_pivot_header_fields\", template: this._popup_templates.popupHeaders, height: 45 }, { id: \"fields\", view: \"list\", scroll: true, type: { height: \"auto\" }, css: \"\", drag: true, template: \"<span class='webix_pivot_list_marker'></span>#text#\",\n\t                            on: {\n\t                                onBeforeDropOut: webix.bind(this._check_values_drag, this)\n\t                            }\n\t                        }]\n\t                    }, {\n\t                        type: \"space\",\n\t                        rows: [{\n\t                            type: \"wide\",\n\t                            rows: [{\n\t                                css: \"webix_pivot_transparent\", borderless: true, template: \"<div class='webix_pivot_fields_msg'>\" + webix.i18n.pivot.windowMessage || \"\" + \"</div>\", height: 25\n\t                            }, {\n\t                                type: \"wide\",\n\t                                cols: [{\n\t\n\t                                    rows: [{ id: \"filtersHeader\", data: { value: \"filters\", icon: \"filter\" }, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40 }, { id: \"filters\", view: \"list\", scroll: false, drag: true, css: \"webix_pivot_values\",\n\t                                        template: function template(obj) {\n\t                                            obj.type = obj.type || \"select\";\n\t                                            return \"<a class='webix_pivot_link'>\" + obj.text + \" <span class='webix_link_selection'>\" + obj.type + \"</span></a> \";\n\t                                        },\n\t                                        type: {\n\t                                            height: 35\n\t                                        },\n\t                                        onClick: { \"webix_pivot_link\": webix.bind(this._filter_selector, this) },\n\t                                        on: {\n\t                                            onBeforeDrop: webix.bind(this._copy_filter_field, this),\n\t                                            onBeforeDropOut: webix.bind(this._check_filter_drag, this)\n\t                                        }\n\t                                    }] }, {\n\t                                    rows: [{ id: \"columnsHeader\", data: { value: \"columns\", icon: \"columns\" }, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40 }, { id: \"columns\", view: \"list\", scroll: false, drag: true, type: { height: 35 }, template: \"#text#\" }]\n\t                                }] }, {\n\t                                type: \"wide\",\n\t                                cols: [{\n\t                                    rows: [{ id: \"rowsHeader\", data: { value: \"rows\", icon: \"list\" }, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40 }, { id: \"rows\", view: \"list\", scroll: false, drag: true, template: \"#text#\", type: { height: 35 } }]\n\t                                }, {\n\t                                    rows: [{ id: \"valuesHeader\", data: { value: \"values\", icon: false, iconContent: \"<b>&Sigma;</b>\" }, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40 }, { id: \"values\", view: \"list\", scroll: true, drag: true, css: \"webix_pivot_values\", type: { height: \"auto\" },\n\t                                        template: webix.bind(this._function_template, this),\n\t                                        onClick: {\n\t                                            \"webix_pivot_link\": webix.bind(this._function_selector, this),\n\t                                            \"webix_pivot_plus\": webix.bind(this._function_add, this),\n\t                                            \"webix_pivot_minus\": webix.bind(this._function_remove, this)\n\t                                        },\n\t                                        on: {\n\t                                            onBeforeDrop: webix.bind(this._copy_values_field, this),\n\t                                            onBeforeDropOut: webix.bind(this._check_values_drag, this)\n\t                                        }\n\t                                    }]\n\t                                }] }]\n\t\n\t                        }]\n\t\n\t                    }]\n\t                }]\n\t\n\t            }\n\t        };\n\t    },\n\t    _popup_templates: {\n\t        popupHeaders: function popupHeaders(obj) {\n\t            return webix.i18n.pivot[obj.value];\n\t        },\n\t        popupIconHeaders: function popupIconHeaders(obj) {\n\t            if (obj.icon) return \"<span class='webix_pivot_header_icon webix_icon fa-\" + obj.icon + \"'></span>\" + webix.i18n.pivot[obj.value];else return \"<span class='webix_pivot_header_icon'>\" + obj.iconContent + \"</span>\" + webix.i18n.pivot[obj.value];\n\t        }\n\t    },\n\t    _check_values_drag: function _check_values_drag(ctx) {\n\t        var from = ctx.from,\n\t            to = ctx.to;\n\t        if (to != from) {\n\t            var id = ctx.source[0];\n\t\n\t            if (from == this.$$(\"values\") && to != this.$$(\"filters\")) {\n\t                if (this.$$(\"fields\").getItem(id)) this.$$(\"fields\").remove(id);\n\t            } else if (to != this.$$(\"values\")) {\n\t                var found = false;\n\t                if (from == this.$$(\"filters\")) {\n\t                    var name = from.getItem(id).name;\n\t                    this.$$(\"values\").data.each(function (item) {\n\t                        if (item.name == name) {\n\t                            id = found = item.id;\n\t                        }\n\t                    });\n\t                }\n\t\n\t                if (found || from == this.$$(\"fields\") && to != this.$$(\"filters\")) {\n\t                    if (this.$$(\"values\").getItem(id)) this.$$(\"values\").remove(id);\n\t                }\n\t            }\n\t        }\n\t    },\n\t    _copy_values_field: function _copy_values_field(ctx) {\n\t        if (ctx.to && ctx.from != ctx.to) {\n\t            var id = ctx.source;\n\t            var item = ctx.from.getItem(id);\n\t            if (ctx.from == this.$$(\"fields\")) {\n\t                if (ctx.to.getItem(id)) {\n\t                    this._function_add({}, id);\n\t                } else {\n\t                    ctx.to.add(webix.copy(item), ctx.index);\n\t                }\n\t                return false;\n\t            } else {\n\t                if (!this.$$(\"fields\").getItem(id)) this.$$(\"fields\").add(webix.copy(item));\n\t            }\n\t        }\n\t        return true;\n\t    },\n\t    _copy_filter_field: function _copy_filter_field(ctx) {\n\t        if (ctx.from != ctx.to) {\n\t            var item = webix.copy(ctx.from.getItem(ctx.start));\n\t            var name = item.name;\n\t            delete item.id;\n\t            var found = false;\n\t            this.$$(\"filters\").data.each(function (field) {\n\t                if (field.name == name) {\n\t                    found = true;\n\t                }\n\t            });\n\t            if (!found) ctx.to.add(item);\n\t            return false;\n\t        }\n\t        return false;\n\t    },\n\t    _check_filter_drag: function _check_filter_drag(ctx) {\n\t        if (ctx.from && ctx.to && ctx.from != ctx.to) {\n\t            var lists = [\"fields\", \"rows\", \"columns\"];\n\t            var name = ctx.from.getItem(ctx.start).name;\n\t            for (var i = 0; i < lists.length; i++) {\n\t                var sameItem = null;\n\t                this.$$(lists[i]).data.each(function (item) {\n\t                    if (item.name == name) {\n\t                        sameItem = item;\n\t                    }\n\t                });\n\t                if (sameItem) this.$$(lists[i]).remove(sameItem.id);\n\t            }\n\t            this._check_values_drag(ctx);\n\t        }\n\t        return true;\n\t    },\n\t    _after_init: function _after_init() {\n\t        this.attachEvent(\"onItemClick\", function (id) {\n\t            var innerId = this.innerId(id);\n\t            if (innerId == \"cancel\" || innerId == \"apply\") {\n\t                //transform button clicks to events\n\t                var structure = this.getStructure();\n\t\n\t                if (webix.$$(this.config.pivot).callEvent(\"onBefore\" + innerId, [structure])) {\n\t                    this.callEvent(\"on\" + innerId, [structure]);\n\t                    this.hide();\n\t                }\n\t            }\n\t        });\n\t    },\n\t    _function_template: function _function_template(obj) {\n\t        obj.operation = obj.operation || [\"sum\"];\n\t        if (!webix.isArray(obj.operation)) obj.operation = [obj.operation];\n\t\n\t        var ops = [];\n\t        var locale = webix.$$(this.config.pivot)._apply_locale;\n\t        for (var i = 0; i < obj.operation.length; i++) {\n\t            var op = \"<span class='webix_pivot_link' webix_operation='\" + i + \"'>\";\n\t            op += \"<span>\" + obj.text + \"</span>\";\n\t            op += \"<span class='webix_link_selection'>\" + locale(obj.operation[i]) + \"</span>\";\n\t            op += \"<span class='webix_pivot_minus webix_icon fa-times'></span>\";\n\t            op += \"</span>\";\n\t            ops.push(op);\n\t        }\n\t\n\t        return ops.join(\" \");\n\t    },\n\t\n\t    _function_selector: function _function_selector(e, id) {\n\t        var func_selector = {\n\t            view: \"webix_pivot_popup\", autofit: true,\n\t            width: 150,\n\t            data: this.config.operations || []\n\t        };\n\t        var p = webix.ui(func_selector);\n\t        p.show(e);\n\t        p.attachEvent(\"onHide\", webix.bind(function () {\n\t            var index = webix.html.locate(e, \"webix_operation\");\n\t            var sel = p.getSelected();\n\t            if (sel !== null) {\n\t                this.$$(\"values\").getItem(id).operation[index] = sel.name;\n\t                this.$$(\"values\").updateItem(id);\n\t            }\n\t\n\t            p.close();\n\t        }, this));\n\t    },\n\t\n\t    _function_add: function _function_add(e, id) {\n\t        var item = this.$$(\"values\").getItem(id);\n\t        item.operation.push(\"sum\");\n\t        this.$$(\"values\").updateItem(id);\n\t\n\t        webix.delay(function () {\n\t            var index = item.operation.length - 1;\n\t            var els = this.$$(\"values\").getItemNode(id).childNodes;\n\t            var el = null;\n\t            for (var i = 0; i < els.length; i++) {\n\t                el = els[i];\n\t                if (!el.getAttribute) continue;\n\t                var op = el.getAttribute(\"webix_operation\");\n\t                if (!webix.isUndefined(op) && op == index) break;\n\t            }\n\t            if (el !== null) this._function_selector(el, id);\n\t        }, this);\n\t    },\n\t    _function_remove: function _function_remove(e, id) {\n\t        var index = webix.html.locate(e, \"webix_operation\");\n\t        var item = this.$$(\"values\").getItem(id);\n\t        if (item.operation.length > 1) {\n\t            item.operation.splice(index, 1);\n\t            this.$$(\"values\").updateItem(id);\n\t        } else {\n\t            this.$$(\"values\").remove(id);\n\t            //this.$$(\"values\").move(id, null, this.$$(\"fields\"));\n\t        }\n\t        return false;\n\t    },\n\t\n\t    _filter_selector: function _filter_selector(e, id) {\n\t        var locale = webix.$$(this.config.pivot)._apply_locale;\n\t        var selector = {\n\t            view: \"webix_pivot_popup\", autofit: true,\n\t            height: 150, width: 150,\n\t            data: [{ name: \"datepicker\", title: locale(\"date\") }, { name: \"multiselect\", title: locale(\"multiselect\") }, { name: \"select\", title: locale(\"select\") }, { name: \"text\", title: locale(\"text\") }]\n\t\n\t        };\n\t        var p = webix.ui(selector);\n\t        p.show(e);\n\t        p.attachEvent(\"onHide\", webix.bind(function () {\n\t            var sel = p.getSelected();\n\t            if (sel !== null) {\n\t                var item = this.$$('filters').getItem(id);\n\t                item.type = sel.name;\n\t                this.$$('filters').updateItem(id);\n\t            }\n\t\n\t            p.close();\n\t        }, this));\n\t    },\n\t\n\t    data_setter: function data_setter(value) {\n\t        this.$$(\"fields\").clearAll();\n\t        this.$$(\"fields\").parse(value.fields);\n\t        this.$$(\"fields\").filter(function (item) {\n\t            return item.name != \"id\";\n\t        });\n\t\n\t        this.$$(\"filters\").clearAll();\n\t        this.$$(\"filters\").parse(value.filters);\n\t\n\t        this.$$(\"columns\").clearAll();\n\t        this.$$(\"columns\").parse(value.columns);\n\t\n\t        this.$$(\"rows\").clearAll();\n\t        this.$$(\"rows\").parse(value.rows);\n\t\n\t        this.$$(\"values\").clearAll();\n\t        this.$$(\"values\").parse(value.values);\n\t    },\n\t    setStructure: function setStructure(config) {\n\t        this.define(\"structure\", config);\n\t        this.render();\n\t    },\n\t    getStructure: function getStructure() {\n\t        var structure = { rows: [], columns: [], values: [], filters: [] };\n\t\n\t        var rows = this.$$(\"rows\");\n\t        rows.data.each(function (obj) {\n\t            structure.rows.push(obj.name);\n\t        });\n\t\n\t        var columns = this.$$(\"columns\");\n\t        columns.data.each(function (obj) {\n\t            structure.columns.push(obj.name);\n\t        });\n\t\n\t        var values = this.$$(\"values\");\n\t        values.data.each(function (obj) {\n\t            structure.values.push(obj);\n\t        });\n\t\n\t        var filters = this.$$(\"filters\");\n\t        filters.data.each(function (obj) {\n\t            structure.filters.push(obj);\n\t        });\n\t\n\t        return structure;\n\t    }\n\t}, webix.ui.window, webix.IdSpace);\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _filters = __webpack_require__(8);\n\t\n\tvar flt = _interopRequireWildcard(_filters);\n\t\n\t__webpack_require__(12);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj[\"default\"] = obj; return newObj; } }\n\t\n\twebix.protoUI({\n\t\tname: \"pivot-chart\",\n\t\tversion: \"{{version}}\",\n\t\tdefaults: {\n\t\t\tfieldMap: {},\n\t\t\trows: [],\n\t\t\tfilterLabelAlign: \"right\",\n\t\t\tfilterWidth: 300,\n\t\t\tfilterMinWidth: 180,\n\t\t\teditButtonWidth: 110,\n\t\t\tfilterLabelWidth: 100,\n\t\t\tchartType: \"bar\",\n\t\t\tcolor: \"#36abee\",\n\t\t\tchart: {},\n\t\t\tsingleLegendItem: 1,\n\t\t\tpalette: [[\"#e33fc7\", \"#a244ea\", \"#476cee\", \"#36abee\", \"#58dccd\", \"#a7ee70\"], [\"#d3ee36\", \"#eed236\", \"#ee9336\", \"#ee4339\", \"#595959\", \"#b85981\"], [\"#c670b8\", \"#9984ce\", \"#b9b9e2\", \"#b0cdfa\", \"#a0e4eb\", \"#7faf1b\"], [\"#b4d9a4\", \"#f2f79a\", \"#ffaa7d\", \"#d6806f\", \"#939393\", \"#d9b0d1\"], [\"#780e3b\", \"#684da9\", \"#242464\", \"#205793\", \"#5199a4\", \"#065c27\"], [\"#54b15a\", \"#ecf125\", \"#c65000\", \"#990001\", \"#363636\", \"#800f3e\"]]\n\t\t},\n\t\ttemplates: {\n\t\t\tgroupNameToStr: function groupNameToStr(name, operation) {\n\t\t\t\treturn name + \"_\" + operation;\n\t\t\t},\n\t\t\tgroupNameToObject: function groupNameToObject(name) {\n\t\t\t\tvar arr = name.split(\"_\");\n\t\t\t\treturn { name: arr[0], operation: arr[1] };\n\t\t\t},\n\t\t\tseriesTitle: function seriesTitle(data, i) {\n\t\t\t\tvar name = this.config.fieldMap[data.name] || this._capitalize(data.name);\n\t\t\t\tvar operation = webix.isArray(data.operation) ? data.operation[i] : data.operation;\n\t\t\t\treturn name + \" ( \" + (webix.i18n.pivot[operation] || operation) + \")\";\n\t\t\t}\n\t\t},\n\t\ttemplates_setter: function templates_setter(obj) {\n\t\t\tif ((typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj)) == \"object\") webix.extend(this.templates, obj);\n\t\t},\n\t\tchartMap: {\n\t\t\tbar: function bar(color) {\n\t\t\t\treturn {\n\t\t\t\t\tborder: 0,\n\t\t\t\t\talpha: 1,\n\t\t\t\t\tradius: 0,\n\t\t\t\t\tcolor: color\n\t\t\t\t};\n\t\t\t},\n\t\t\tline: function line(color) {\n\t\t\t\treturn {\n\t\t\t\t\talpha: 1,\n\t\t\t\t\titem: {\n\t\t\t\t\t\tborderColor: color,\n\t\t\t\t\t\tcolor: color\n\t\t\t\t\t},\n\t\t\t\t\tline: {\n\t\t\t\t\t\tcolor: color,\n\t\t\t\t\t\twidth: 2\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t\tradar: function radar(color) {\n\t\t\t\treturn {\n\t\t\t\t\talpha: 1,\n\t\t\t\t\tfill: false,\n\t\t\t\t\tdisableItems: true,\n\t\t\t\t\titem: {\n\t\t\t\t\t\tborderColor: color,\n\t\t\t\t\t\tcolor: color\n\t\t\t\t\t},\n\t\t\t\t\tline: {\n\t\t\t\t\t\tcolor: color,\n\t\t\t\t\t\twidth: 2\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tchartMap_setter: function chartMap_setter(obj) {\n\t\t\tif ((typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj)) == \"object\") webix.extend(this.chartMap, obj, true);\n\t\t},\n\t\t$init: function $init(config) {\n\t\t\tif (!config.structure) config.structure = {};\n\t\t\twebix.extend(config.structure, { groupBy: \"\", values: [], filters: [] });\n\t\n\t\t\tthis.$view.className += \" webix_pivot_chart\";\n\t\t\twebix.extend(config, { editButtonWidth: this.defaults.editButtonWidth });\n\t\t\twebix.extend(config, this.getUI(config));\n\t\n\t\t\tthis.$ready.push(webix.bind(function () {\n\t\t\t\twebix.delay(this.render, this); // delay needed for correct legend rendering\n\t\t\t}, this));\n\t\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(function () {\n\t\t\t\t// call render if pivot is initialized\n\t\t\t\tif (this.$$(\"chart\")) this.render(this, arguments);\n\t\t\t}, this));\n\t\t},\n\t\tgetUI: function getUI(config) {\n\t\t\tvar cols = [];\n\t\n\t\t\tcols.push({ id: \"filters\", hidden: true, cols: [] });\n\t\t\tif (!config.readonly) {\n\t\t\t\tcols.push({}, {\n\t\t\t\t\tid: \"edit\", view: \"icon\", type: \"iconButton\", align: \"right\", icon: \"pencil-square-o\", inputWidth: config.editButtonWidth,\n\t\t\t\t\ttooltip: this._applyLocale(\"settings\"), click: webix.bind(this.configure, this)\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar header = {\n\t\t\t\tpaddingY: 10,\n\t\t\t\tpaddingX: 5,\n\t\t\t\tmargin: 10,\n\t\t\t\tmaxHeight: 5,\n\t\t\t\tid: \"toolbar\",\n\t\t\t\tcols: cols\n\t\t\t};\n\t\n\t\t\tvar chart = { id: \"bodyLayout\", type: \"line\", margin: 10, cols: [{ id: \"chart\", view: \"chart\" }] };\n\t\t\treturn { type: \"clean\", rows: [header, chart] };\n\t\t},\n\t\tconfigure: function configure() {\n\t\t\tif (!this.pivotPopup) {\n\t\t\t\tvar config = { view: \"webix_pivot_chart_config\", operations: [], pivot: this.config.id };\n\t\t\t\twebix.extend(config, this.config.popup || {});\n\t\n\t\t\t\tthis.pivotPopup = webix.ui(config);\n\t\t\t\tthis.callEvent(\"onPopup\", [this.pivotPopup]);\n\t\t\t\tthis.pivotPopup.attachEvent(\"onApply\", webix.bind(function (structure) {\n\t\t\t\t\tthis.config.chartType = this.pivotPopup.$$(\"chartType\") ? this.pivotPopup.$$(\"chartType\").getValue() : \"bar\";\n\t\t\t\t\tthis.config.chart.scale = this.pivotPopup.$$(\"logScale\").getValue() ? \"logarithmic\" : \"linear\";\n\t\t\t\t\twebix.extend(this.config.structure, structure, true);\n\t\t\t\t\tthis.render();\n\t\t\t\t}, this));\n\t\t\t}\n\t\n\t\t\tvar functions = [];\n\t\t\tfor (var i in this.operations) {\n\t\t\t\tfunctions.push({ name: i, title: this._applyLocale(i) });\n\t\t\t}this.pivotPopup._valueLength = this._valueLength;\n\t\t\tthis.pivotPopup.define(\"operations\", functions);\n\t\t\tvar pos = webix.html.offset(this.$$(\"chart\").getNode());\n\t\t\tthis.pivotPopup.setPosition(pos.x + 10, pos.y + 10);\n\t\t\tthis.pivotPopup.define(\"data\", this.getFields());\n\t\t\tthis.pivotPopup._valueFields = this.pivotPopup.show();\n\t\t},\n\t\trender: function render(mode) {\n\t\t\t// render filters\n\t\t\tvar filters = this._processFilters();\n\t\t\tif (filters.length) {\n\t\n\t\t\t\tthis.$$(\"filters\").show();\n\t\t\t\tthis.$$(\"filters\").define(\"cols\", filters);\n\t\t\t\tthis._setFilterEvents();\n\t\t\t} else {\n\t\t\t\tthis.$$(\"filters\").hide();\n\t\t\t}\n\t\t\tthis._initFilters();\n\t\n\t\t\tthis._setChartConfig();\n\t\n\t\t\tthis._loadFilteredData();\n\t\t},\n\t\t_setChartConfig: function _setChartConfig() {\n\t\t\tvar config = this.config;\n\t\t\tvar values = config.structure.values;\n\t\n\t\t\tfor (var i = 0; i < values.length; i++) {\n\t\t\t\tvalues[i].operation = values[i].operation || [\"sum\"];\n\t\t\t\tif (!webix.isArray(values[i].operation)) values[i].operation = [values[i].operation];\n\t\t\t}\n\t\n\t\t\tvar chartType = this.config.chartType || \"bar\";\n\t\t\tvar mapConfig = this.chartMap[chartType];\n\t\n\t\t\tvar chart = {\n\t\n\t\t\t\t\"type\": mapConfig && mapConfig(\"\").type ? mapConfig(\"\").type : chartType,\n\t\t\t\t\"xAxis\": webix.extend({ template: \"#id#\" }, config.chart.xAxis || {}, true),\n\t\t\t\t\"yAxis\": webix.extend({}, config.chart.yAxis || {})\n\t\t\t};\n\t\n\t\t\twebix.extend(chart, config.chart);\n\t\t\tif (!chart.padding) {\n\t\t\t\tchart.padding = { top: 17 };\n\t\t\t}\n\t\n\t\t\tvar result = this._getSeries();\n\t\n\t\t\tchart.series = result.series;\n\t\n\t\t\tchart.legend = false;\n\t\t\tif (config.singleLegendItem || this._valueLength > 1) {\n\t\t\t\tchart.legend = result.legend;\n\t\t\t}\n\t\n\t\t\tchart.scheme = {\n\t\t\t\t$group: this._pivot_group,\n\t\t\t\t$sort: {\n\t\t\t\t\tby: \"id\"\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.$$(\"chart\").removeAllSeries();\n\t\t\tfor (var c in chart) {\n\t\t\t\tthis.$$(\"chart\").define(c, chart[c]);\n\t\t\t}\n\t\t},\n\t\t_applyLocale: function _applyLocale(value) {\n\t\t\treturn webix.i18n.pivot[value] || value;\n\t\t},\n\t\t_capitalize: function _capitalize(value) {\n\t\t\treturn value.charAt(0).toUpperCase() + value.slice(1);\n\t\t},\n\t\t_applyMap: function _applyMap(value, capitalize) {\n\t\t\treturn this.config.fieldMap[value] || (capitalize ? this._capitalize(value) : value);\n\t\t},\n\t\t_processFilters: function _processFilters() {\n\t\t\tvar filters = this.config.structure.filters || [];\n\t\n\t\t\tvar items = [];\n\t\t\tfor (var i = 0; i < filters.length; i++) {\n\t\t\t\tvar f = filters[i];\n\t\t\t\tvar item = { value: f.value, label: this._applyMap(f.name, true), field: f.name, view: f.type, stringResult: true,\n\t\t\t\t\tlabelAlign: this.config.filterLabelAlign, labelWidth: this.config.filterLabelWidth, minWidth: this.config.filterMinWidth, maxWidth: this.config.filterWidth };\n\t\t\t\tif (f.type == \"select\" || f.type == \"multiselect\") {\n\t\t\t\t\titem.options = this._distinctValues(f.name);\n\t\t\t\t\tif (f.type == \"multiselect\") item.options.shift();\n\t\t\t\t}\n\t\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t\treturn items;\n\t\t},\n\t\t_distinctValues: function _distinctValues(field) {\n\t\t\tvar values = [{ value: \"\", id: \"\" }];\n\t\t\tvar data = this.data.pull;\n\t\t\tvar hash = {};\n\t\t\tfor (var obj in data) {\n\t\t\t\tvar value = data[obj][field];\n\t\t\t\tif (!webix.isUndefined(value)) {\n\t\t\t\t\tif (!hash[value]) {\n\t\t\t\t\t\tvalues.push({ value: value, id: value });\n\t\t\t\t\t\thash[value] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalues.sort(function (a, b) {\n\t\t\t\tvar val1 = a.value;\n\t\t\t\tvar val2 = b.value;\n\t\t\t\tif (!val2) return 1;\n\t\t\t\tif (!val1) return -1;\n\t\n\t\t\t\tval1 = val1.toString().toLowerCase();val2 = val2.toString().toLowerCase();\n\t\t\t\treturn val1 > val2 ? 1 : val1 < val2 ? -1 : 0;\n\t\t\t});\n\t\t\treturn values;\n\t\t},\n\t\t_loadFilteredData: function _loadFilteredData() {\n\t\t\tthis._initFilters();\n\t\t\tthis.data.silent(function () {\n\t\t\t\tthis.data.filter(webix.bind(this._filterItem, this));\n\t\t\t}, this);\n\t\t\tthis.$$(\"chart\").data.silent(function () {\n\t\t\t\tthis.$$(\"chart\").clearAll();\n\t\t\t}, this);\n\t\t\tthis.$$(\"chart\").parse(this.data.getRange());\n\t\t},\n\t\t_setFilterEvents: function _setFilterEvents() {\n\t\t\tvar filters = this.$$(\"filters\");\n\t\t\tfilters.reconstruct();\n\t\t\tvar children = filters.getChildViews();\n\t\t\tvar pivot = this;\n\t\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar el = children[i];\n\t\t\t\tif (el.name == \"select\" || el.name == \"multiselect\" || el.name == \"datepicker\") el.attachEvent(\"onChange\", function (newvalue) {\n\t\t\t\t\tpivot._setFilterValue(this.config.field, newvalue);\n\t\t\t\t});else if (!webix.isUndefined(el.getValue)) {\n\t\t\t\t\tel.attachEvent(\"onTimedKeyPress\", function () {\n\t\t\t\t\t\tpivot._setFilterValue(this.config.field, this.getValue());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t_setFilterValue: function _setFilterValue(field, value) {\n\t\t\tvar filters = this.config.structure.filters;\n\t\t\tfor (var i = 0; i < filters.length; i++) {\n\t\t\t\tif (filters[i].name == field) {\n\t\t\t\t\tfilters[i].value = value;\n\t\t\t\t\tthis._loadFilteredData();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}return false;\n\t\t},\n\t\n\t\tgroupNameToStr: function groupNameToStr(obj) {\n\t\t\treturn obj.name + \"_\" + obj.operation;\n\t\t},\n\t\tgroupNameToObject: function groupNameToObject(name) {\n\t\t\tvar arr = name.split(\"_\");\n\t\t\treturn { name: arr[0], operation: arr[1] };\n\t\t},\n\t\t_getSeries: function _getSeries() {\n\t\t\tvar i,\n\t\t\t    j,\n\t\t\t    legend,\n\t\t\t    map = {},\n\t\t\t    name,\n\t\t\t    legendTitle,\n\t\t\t    series = [],\n\t\t\t    values = this.config.structure.values;\n\t\n\t\t\t// legend definition\n\t\t\tlegend = {\n\t\t\t\tvalign: \"middle\",\n\t\t\t\talign: \"right\",\n\t\t\t\twidth: 140,\n\t\t\t\tlayout: \"y\"\n\t\t\t};\n\t\t\twebix.extend(legend, this.config.chart.legend || {}, true);\n\t\t\tlegend.values = [];\n\t\t\tif (!legend.marker) legend.marker = {};\n\t\t\tlegend.marker.type = this.config.chartType == \"line\" ? \"item\" : \"s\";\n\t\n\t\t\tthis.series_names = [];\n\t\t\tthis._valueLength = 0;\n\t\n\t\t\tfor (i = 0; i < values.length; i++) {\n\t\t\t\tif (!webix.isArray(values[i].operation)) {\n\t\t\t\t\tvalues[i].operation = [values[i].operation];\n\t\t\t\t}\n\t\t\t\tif (!webix.isArray(values[i].color)) {\n\t\n\t\t\t\t\tvalues[i].color = [values[i].color || this._getColor(this._valueLength)];\n\t\t\t\t}\n\t\t\t\tfor (j = 0; j < values[i].operation.length; j++) {\n\t\n\t\t\t\t\tname = this.templates.groupNameToStr(values[i].name, values[i].operation[j]);\n\t\t\t\t\tthis.series_names.push(name);\n\t\t\t\t\tif (!values[i].color[j]) values[i].color[j] = this._getColor(this._valueLength);\n\t\t\t\t\tvar color = values[i].color[j];\n\t\t\t\t\tvar sConfig = this.chartMap[this.config.chartType](color) || {};\n\t\t\t\t\tsConfig.value = \"#\" + name + \"#\";\n\t\t\t\t\tsConfig.tooltip = {\n\t\t\t\t\t\ttemplate: webix.bind(function (obj) {\n\t\t\t\t\t\t\treturn obj[this].toFixed(3);\n\t\t\t\t\t\t}, name)\n\t\t\t\t\t};\n\t\n\t\t\t\t\tseries.push(sConfig);\n\t\t\t\t\tlegendTitle = this.templates.seriesTitle.call(this, values[i], j);\n\t\t\t\t\tlegend.values.push({\n\t\t\t\t\t\ttext: legendTitle,\n\t\t\t\t\t\tcolor: color\n\t\t\t\t\t});\n\t\t\t\t\tmap[name] = [values[i].name, values[i].operation[j]];\n\t\t\t\t\tthis._valueLength++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._pivot_group = {};\n\t\t\tif (values.length) this._pivot_group = webix.copy({\n\t\t\t\tby: this.config.structure.groupBy,\n\t\t\t\tmap: map\n\t\t\t});\n\t\n\t\t\treturn { series: series, legend: legend };\n\t\t},\n\t\t_getColor: function _getColor(i) {\n\t\t\tvar palette = this.config.palette;\n\t\t\tvar rowIndex = i / palette[0].length;\n\t\t\trowIndex = rowIndex > palette.length ? 0 : parseInt(rowIndex, 10);\n\t\t\tvar columnIndex = i % palette[0].length;\n\t\t\treturn palette[rowIndex][columnIndex];\n\t\t},\n\t\t_processLegend: function _processLegend() {\n\t\t\tvar i,\n\t\t\t    legend,\n\t\t\t    name,\n\t\t\t    values = this.config.structure.values;\n\t\n\t\t\tlegend = {\n\t\t\t\tvalign: \"middle\",\n\t\t\t\talign: \"right\",\n\t\t\t\twidth: 140,\n\t\t\t\tlayout: \"y\"\n\t\t\t};\n\t\n\t\t\twebix.extend(legend, this.config.chart.legend || {}, true);\n\t\n\t\t\tlegend.values = [];\n\t\t\tif (!legend.marker) legend.marker = {};\n\t\t\tlegend.marker.type = this.config.chartType == \"line\" ? \"item\" : \"s\";\n\t\n\t\t\tfor (i = 0; i < values.length; i++) {\n\t\t\t\tname = this.templates.seriesTitle.call(this, values[i]);\n\t\n\t\t\t\tlegend.values.push({\n\t\t\t\t\ttext: name,\n\t\t\t\t\tcolor: values[i].color\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn legend;\n\t\t},\n\t\toperations: { sum: 1, count: 1, max: 1, min: 1 },\n\t\taddGroupMethod: function addGroupMethod(name, method) {\n\t\t\tthis.operations[name] = 1;\n\t\t\tif (method) webix.GroupMethods[name] = method;\n\t\t},\n\t\tremoveGroupMethod: function removeGroupMethod(name) {\n\t\t\tdelete this.operations[name];\n\t\t},\n\t\tgroupMethods_setter: function groupMethods_setter(obj) {\n\t\t\tfor (var a in obj) {\n\t\t\t\tif (obj.hasOwnProperty(a)) this.addGroupMethod(a, obj[a]);\n\t\t\t}\n\t\t},\n\t\t// fields for edit popup\n\t\tgetFields: function getFields() {\n\t\n\t\t\tvar i,\n\t\t\t    fields = [],\n\t\t\t    fields_hash = {};\n\t\t\tfor (i = 0; i < Math.min(this.data.count() || 5); i++) {\n\t\t\t\tvar item = this.data.getItem(this.data.getIdByIndex(i));\n\t\t\t\tfor (var f in item) {\n\t\t\t\t\tif (!fields_hash[f]) {\n\t\t\t\t\t\tfields.push(f);\n\t\t\t\t\t\tfields_hash[f] = webix.uid();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tvar str = this.config.structure;\n\t\t\tvar result = { fields: [], groupBy: [], values: [], filters: [] };\n\t\n\t\t\tvar field = _typeof(str.groupBy) == \"object\" ? str.groupBy[0] : str.groupBy;\n\t\t\tif (!webix.isUndefined(fields_hash[field])) {\n\t\t\t\tresult.groupBy.push({ name: field, text: this._applyMap(field), id: fields_hash[field] });\n\t\t\t\tdelete fields_hash[field];\n\t\t\t}\n\t\n\t\t\tvar valueNameHash = {};\n\t\t\tvar text;\n\t\t\tfor (i = 0; i < str.values.length; i++) {\n\t\t\t\tfield = str.values[i];\n\t\t\t\tif (!webix.isUndefined(fields_hash[field.name])) {\n\t\t\t\t\ttext = this._applyMap(field.name);\n\t\t\t\t\tif (webix.isUndefined(valueNameHash[field.name])) {\n\t\t\t\t\t\tvalueNameHash[field.name] = result.values.length;\n\t\t\t\t\t\tresult.values.push({ name: field.name, text: text, operation: field.operation, color: field.color || [this._getColor(i)], id: fields_hash[field.name] });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar value = result.values[valueNameHash[field.name]];\n\t\t\t\t\t\tvalue.operation = value.operation.concat(field.operation);\n\t\t\t\t\t\tvalue.color = value.color.concat(field.color || [this._getColor(i)]);\n\t\t\t\t\t}\n\t\n\t\t\t\t\t//delete fields_hash[field.name];   // values allows to drag a field multiple times\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (i = 0; i < (str.filters || []).length; i++) {\n\t\t\t\tfield = str.filters[i];\n\t\t\t\tif (!webix.isUndefined(fields_hash[field.name])) {\n\t\t\t\t\ttext = this._applyMap(field.name);\n\t\t\t\t\tresult.filters.push({ name: field.name, text: text, type: field.type, value: field.value, id: fields_hash[field] });\n\t\t\t\t\tdelete fields_hash[field.name];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (i = 0; i < fields.length; i++) {\n\t\t\t\tfield = fields[i];\n\t\t\t\tif (!webix.isUndefined(fields_hash[field])) result.fields.push({ name: field, text: this._applyMap(field), id: fields_hash[field] });\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t_initFilters: function _initFilters() {\n\t\t\tvar filters = this.config.structure.filters || [];\n\t\t\tflt.init(filters);\n\t\t},\n\t\t_filterItem: function _filterItem(item) {\n\t\t\tvar filters = this.config.structure.filters || [];\n\t\t\treturn flt.filterItem(filters, item);\n\t\t},\n\t\tgetStructure: function getStructure() {\n\t\t\treturn this.config.structure;\n\t\t},\n\t\tgetConfigWindow: function getConfigWindow() {\n\t\t\treturn this._config_popup;\n\t\t}\n\t}, webix.IdSpace, webix.ui.layout, webix.DataLoader, webix.EventSystem, webix.Settings);\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\twebix.protoUI({\n\t    name: \"webix_pivot_chart_config\",\n\t\n\t    $init: function $init(config) {\n\t        this.$view.className += \" webix_pivot_chart_popup\";\n\t        webix.extend(config, this.defaults);\n\t        webix.extend(config, this._getUI(config));\n\t        this.$ready.push(this._afterInit);\n\t    },\n\t    defaults: {\n\t        padding: 8,\n\t        height: 500,\n\t        width: 650,\n\t        head: false,\n\t        modal: true,\n\t        move: true,\n\t        chartTypeLabelWidth: 80,\n\t        chartTypeWidth: 250,\n\t        cancelButtonWidth: 100,\n\t        applyButtonWidth: 100,\n\t        logScaleLabelWidth: 125,\n\t        fieldsColumnWidth: 280\n\t    },\n\t    _getUI: function _getUI(config) {\n\t        var chartTypes = [];\n\t        var pivot = webix.$$(config.pivot);\n\t        var types = pivot.chartMap;\n\t        for (var type in types) {\n\t            chartTypes.push({ id: type, value: pivot._applyLocale(type) });\n\t        }\n\t        return {\n\t            head: {\n\t                view: \"toolbar\",\n\t                cols: [{ id: \"config_title\", view: \"label\", label: webix.i18n.pivot.windowTitle }, { view: \"button\", id: \"cancel\", label: pivot._applyLocale(\"cancel\"), width: config.cancelButtonWidth }, { view: \"button\", id: \"apply\", type: \"form\", css: \"webix_pivot_apply\", label: pivot._applyLocale(\"apply\"), width: config.applyButtonWidth }]\n\t            },\n\t            body: {\n\t                type: \"space\",\n\t                rows: [\n\t                /*{\n\t                 type: \"space\",\n\t                 cols:[\n\t                 {\tcss:\"webix_pivot_transparent\", borderless: true, template: \"<div class='webix_pivot_fields_msg'>\"+webix.i18n.pivot.windowMessage||\"\"+\"</div>\", height: 25}\n\t                 ]\n\t                  },*/\n\t                {\n\t\n\t                    type: \"wide\",\n\t                    cols: [{\n\t                        width: config.fieldsColumnWidth,\n\t                        rows: [{ id: \"fieldsHeader\", css: \"webix_pivot_header_fields\", template: \"<div class='webix_pivot_fields_msg'>\" + webix.i18n.pivot.windowMessage || \"\" + \"</div>\", height: 40 }, { id: \"fields\", view: \"list\", type: { height: \"auto\" }, drag: true, template: \"<span class='webix_pivot_list_marker'></span>#text#\",\n\t                            on: {\n\t                                onBeforeDrop: webix.bind(this._skipValueDrag, this),\n\t                                onBeforeDropOut: webix.bind(this._checkValueDrag, this),\n\t\n\t                                onBeforeDrag: webix.bind(this._hidePopups, this)\n\t                            }\n\t                        }]\n\t                    },\n\t                    //\t{ view: \"resizer\", width: 4},\n\t                    {\n\t\n\t                        type: \"wide\",\n\t                        rows: [{\n\t                            rows: [{ id: \"filtersHeader\", data: { value: \"filters\", icon: \"filter\" }, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40 }, { id: \"filters\", view: \"list\", scroll: true, gravity: 2, drag: true, css: \"webix_pivot_values\",\n\t                                template: function template(obj) {\n\t                                    obj.type = obj.type || \"select\";\n\t                                    return \"<div class='webix_pivot_link'>\" + obj.text + \"<div class='webix_link_selection filter'>\" + pivot._applyLocale(obj.type) + \"</div></div> \";\n\t                                },\n\t                                type: {\n\t                                    height: 35\n\t                                },\n\t                                onClick: { \"webix_link_selection\": webix.bind(this._filterSelector, this) },\n\t                                on: {\n\t                                    onBeforeDrag: webix.bind(this._hidePopups, this)\n\t                                }\n\t\n\t                            }]\n\t                        }, {\n\t                            rows: [{ id: \"valuesHeader\", data: { value: \"values\", icon: \"bar-chart\" }, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40 }, { id: \"values\", view: \"list\", scroll: true, gravity: 3, drag: true, css: \"webix_pivot_values\", type: { height: \"auto\" },\n\t                                template: webix.bind(this._function_template, this),\n\t                                onClick: {\n\t                                    \"webix_link_title\": webix.bind(this._function_selector, this),\n\t                                    \"webix_link_selection\": webix.bind(this._function_selector, this),\n\t                                    \"webix_color_selection\": webix.bind(this._function_color, this),\n\t                                    \"webix_pivot_minus\": webix.bind(this._function_remove, this)\n\t                                },\n\t                                on: {\n\t                                    onBeforeDrop: webix.bind(this._copyValueField, this),\n\t                                    onBeforeDropOut: webix.bind(this._checkValueDrag, this),\n\t                                    onBeforeDrag: webix.bind(this._hidePopups, this)\n\t                                }\n\t                            }]\n\t                        }, {\n\t                            rows: [{ id: \"groupHeader\", data: { value: \"groupBy\", icon: \"sitemap\" }, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40 }, { id: \"groupBy\", view: \"list\", yCount: 1, scroll: false, drag: true, type: { height: 35 },\n\t                                template: \"<a class='webix_pivot_link'>#text#</a> \",\n\t                                on: {\n\t                                    onBeforeDrop: webix.bind(this._changeGroupby, this),\n\t                                    onBeforeDrag: webix.bind(this._hidePopups, this)\n\t                                }\n\t                            }]\n\t                        }]\n\t                    }]\n\t                }, {\n\t                    /*paddingX: 10,\n\t                     paddingY: 5,*/\n\t                    borderless: true,\n\t                    css: \"webix_pivot_footer\",\n\t                    /*padding: 5,\n\t                     type: \"space\",*/\n\t                    cols: [{\n\t                        view: \"checkbox\", id: \"logScale\", value: pivot.config.chart.scale && pivot.config.chart.scale == \"logarithmic\", label: webix.i18n.pivot.logScale,\n\t                        labelWidth: config.logScaleLabelWidth, width: config.logScaleLabelWidth + 20\n\t                    }, {}, {\n\t                        view: \"select\", id: \"chartType\", value: pivot.config.chartType, label: webix.i18n.pivot.chartType, options: chartTypes,\n\t                        labelWidth: config.chartTypeLabelWidth, width: config.chartTypeWidth\n\t                    }]\n\t                }]\n\t\n\t            }\n\t        };\n\t    },\n\t    _popup_templates: {\n\t        popupHeaders: function popupHeaders(obj) {\n\t            return webix.i18n.pivot[obj.value];\n\t        },\n\t        popupIconHeaders: function popupIconHeaders(obj) {\n\t            return \"<span class='webix_pivot_header_icon webix_icon fa-\" + obj.icon + \"'></span>\" + webix.i18n.pivot[obj.value];\n\t        }\n\t    },\n\t    _hidePopups: function _hidePopups() {\n\t        webix.callEvent(\"onClick\", []);\n\t    },\n\t    _skipValueDrag: function _skipValueDrag(ctx) {\n\t        if (ctx.from == this.$$(\"values\")) {\n\t            var id = ctx.source[0];\n\t            if (this.$$(\"values\").getItem(id)) {\n\t                this.$$(\"values\").remove(id);\n\t            }\n\t            return false;\n\t        }\n\t        return true;\n\t    },\n\t    _checkValueDrag: function _checkValueDrag(ctx) {\n\t        if (ctx.to != ctx.from) {\n\t            var id = ctx.source[0];\n\t            if (ctx.from == this.$$(\"values\") && ctx.to != this.$$(\"fields\")) {\n\t                delete this.$$(\"values\").getItem(id).operation;\n\t                delete this.$$(\"values\").getItem(id).color;\n\t                if (this.$$(\"fields\").getItem(id)) this.$$(\"fields\").remove(id);\n\t            } else if (ctx.from == this.$$(\"fields\") && ctx.to != this.$$(\"values\")) {\n\t                if (this.$$(\"values\").getItem(id)) {\n\t                    this.$$(\"values\").remove(id);\n\t                }\n\t            }\n\t        }\n\t    },\n\t    _copyValueField: function _copyValueField(ctx) {\n\t        if (ctx.to && ctx.from != ctx.to) {\n\t            var id = ctx.source;\n\t            var item = ctx.from.getItem(id);\n\t\n\t            if (ctx.from == this.$$(\"fields\")) {\n\t                if (ctx.to.getItem(id)) {\n\t                    this._function_add({}, id);\n\t                    this._valueLength++;\n\t                } else {\n\t                    item = webix.copy(item);\n\t\n\t                    ctx.to.add(webix.copy(item), ctx.index);\n\t                    this._valueLength++;\n\t                }\n\t\n\t                return false;\n\t            } else if (!this.$$(\"fields\").getItem(id)) {\n\t                this.$$(\"fields\").add(webix.copy(item));\n\t            }\n\t\n\t            this._increaseColorIndex = true;\n\t        }\n\t        return true;\n\t    },\n\t    _changeGroupby: function _changeGroupby(ctx) {\n\t        if (this.$$(\"groupBy\").data.order.length) {\n\t            var id = this.$$(\"groupBy\").getFirstId();\n\t            var item = webix.copy(this.$$(\"groupBy\").getItem(id));\n\t            this.$$(\"groupBy\").remove(id);\n\t            this.$$(\"fields\").add(item);\n\t        }\n\t        return true;\n\t    },\n\t    _afterInit: function _afterInit() {\n\t        this.attachEvent(\"onItemClick\", function (id) {\n\t            if (this.$eventSource.name == \"button\") {\n\t                //transform button clicks to events\n\t                var structure = this.getStructure();\n\t\n\t                if (this.innerId(id) == \"apply\" && (!structure.values.length || !structure.groupBy)) {\n\t                    webix.alert(webix.i18n.pivot.valuesNotDefined);\n\t                } else {\n\t                    this.callEvent(\"on\" + this.innerId(id), [structure]);\n\t                    this.hide();\n\t                }\n\t            }\n\t        });\n\t    },\n\t\n\t    _function_template: function _function_template(obj) {\n\t        obj.operation = obj.operation || [\"sum\"];\n\t        if (!webix.isArray(obj.operation)) obj.operation = [obj.operation];\n\t\n\t        var ops = [];\n\t        var pivot = webix.$$(this.config.pivot);\n\t        var locale = pivot._applyLocale;\n\t\n\t        for (var i = 0; i < obj.operation.length; i++) {\n\t            if (!obj.color) obj.color = [pivot._getColor(this._valueLength)];\n\t            if (!obj.color[i]) obj.color.push(pivot._getColor(this._valueLength));\n\t            var op = \"<div class='webix_pivot_link' webix_operation='\" + i + \"'>\";\n\t            op += \"<div class='webix_color_selection'><div style='background-color:\" + locale(obj.color[i]) + \"'></div></div>\";\n\t            op += \"<div class='webix_link_title'>\" + obj.text + \"</div>\";\n\t            op += \"<div class='webix_link_selection'>\" + locale(obj.operation[i]) + \"</div>\";\n\t\n\t            op += \"<div class='webix_pivot_minus webix_icon fa-times'></div>\";\n\t            op += \"</div>\";\n\t            ops.push(op);\n\t        }\n\t        if (this._increaseColorIndex) {\n\t            this._increaseColorIndex = false;\n\t            this._valueLength++;\n\t        }\n\t        return ops.join(\" \");\n\t    },\n\t\n\t    _function_selector: function _function_selector(e, id) {\n\t        var func_selector = {\n\t            view: \"webix_pivot_popup\", autofit: true,\n\t            autoheight: true, width: 150,\n\t            data: this.config.operations || []\n\t        };\n\t        var p = webix.ui(func_selector);\n\t        p.show(e);\n\t        p.attachEvent(\"onHide\", webix.bind(function () {\n\t            var index = webix.html.locate(e, \"webix_operation\");\n\t            var sel = p.getSelected();\n\t            if (sel !== null) {\n\t                this.$$(\"values\").getItem(id).operation[index] = sel.name;\n\t                this.$$(\"values\").updateItem(id);\n\t            }\n\t\n\t            p.close();\n\t        }, this));\n\t    },\n\t    _function_color: function _function_color(e, id) {\n\t\n\t        var colorboard = {\n\t            view: \"colorboard\",\n\t            //id: \"colorboard\",\n\t            borderless: true\n\t\n\t        };\n\t        if (webix.$$(this.config.pivot).config.colorboard) {\n\t            webix.extend(colorboard, webix.$$(this.config.pivot).config.colorboard);\n\t        } else {\n\t            webix.extend(colorboard, {\n\t                width: 150,\n\t                height: 150,\n\t                palette: webix.$$(this.config.pivot).config.palette\n\t            });\n\t        }\n\t\n\t        var p = webix.ui({\n\t            view: \"popup\",\n\t            id: \"colorsPopup\",\n\t            body: colorboard\n\t        });\n\t        p.show(e);\n\t        p.getBody().attachEvent(\"onSelect\", function () {\n\t            p.hide();\n\t        });\n\t        p.attachEvent(\"onHide\", webix.bind(function () {\n\t            var index = webix.html.locate(e, \"webix_operation\");\n\t            var value = p.getBody().getValue();\n\t            if (value) {\n\t                this.$$(\"values\").getItem(id).color[index] = value;\n\t                this.$$(\"values\").updateItem(id);\n\t            }\n\t            p.close();\n\t        }, this));\n\t        return false;\n\t    },\n\t    _function_add: function _function_add(e, id) {\n\t        var item = this.$$(\"values\").getItem(id);\n\t        item.operation.push(\"sum\");\n\t        var pivot = webix.$$(this.config.pivot);\n\t        var palette = pivot.config.palette;\n\t        item.color.push(pivot._getColor(this._valueLength));\n\t        this.$$(\"values\").updateItem(id);\n\t\n\t        webix.delay(function () {\n\t            var index = item.operation.length - 1;\n\t            var els = this.$$(\"values\").getItemNode(id).childNodes;\n\t            var el = null;\n\t            for (var i = 0; i < els.length; i++) {\n\t                el = els[i];\n\t                if (!el.getAttribute) continue;\n\t                var op = el.getAttribute(\"webix_operation\");\n\t                if (!webix.isUndefined(op) && op == index) break;\n\t            }\n\t            if (el !== null) this._function_selector(el, id);\n\t        }, this);\n\t    },\n\t    _function_remove: function _function_remove(e, id) {\n\t        var index = webix.html.locate(e, \"webix_operation\");\n\t        var item = this.$$(\"values\").getItem(id);\n\t        if (item.operation.length > 1) {\n\t            item.operation.splice(index, 1);\n\t            this.$$(\"values\").updateItem(id);\n\t        } else {\n\t            this.$$(\"values\").remove(id);\n\t            //this.$$(\"values\").move(id, null, this.$$(\"fields\"));\n\t        }\n\t        return false;\n\t    },\n\t\n\t    _filterSelector: function _filterSelector(e, id) {\n\t        var locale = webix.$$(this.config.pivot)._applyLocale;\n\t        var selector = {\n\t            view: \"webix_pivot_popup\", autofit: true,\n\t            height: 150, width: 150,\n\t            data: [{ name: \"datepicker\", title: locale(\"date\") }, { name: \"multiselect\", title: locale(\"multiselect\") }, { name: \"select\", title: locale(\"select\") }, { name: \"text\", title: locale(\"text\") }]\n\t        };\n\t        var p = webix.ui(selector);\n\t        p.show(e);\n\t        p.attachEvent(\"onHide\", webix.bind(function () {\n\t            var sel = p.getSelected();\n\t            if (sel !== null) {\n\t                var item = this.$$('filters').getItem(id);\n\t                item.type = sel.name;\n\t                this.$$('filters').updateItem(id);\n\t            }\n\t\n\t            p.close();\n\t        }, this));\n\t    },\n\t\n\t    data_setter: function data_setter(value) {\n\t        this.$$(\"fields\").clearAll();\n\t        this.$$(\"fields\").parse(value.fields);\n\t        this.$$(\"fields\").filter(function (item) {\n\t            return item.name != \"id\";\n\t        });\n\t\n\t        this.$$(\"filters\").clearAll();\n\t        this.$$(\"filters\").parse(value.filters);\n\t\n\t        this.$$(\"groupBy\").clearAll();\n\t        this.$$(\"groupBy\").parse(value.groupBy);\n\t\n\t        this.$$(\"values\").clearAll();\n\t        this.$$(\"values\").parse(value.values);\n\t    },\n\t    getStructure: function getStructure() {\n\t        var structure = { groupBy: \"\", values: [], filters: [] };\n\t\n\t        var groupBy = this.$$(\"groupBy\");\n\t        if (groupBy.count()) structure.groupBy = groupBy.getItem(groupBy.getFirstId()).name;\n\t\n\t        var values = this.$$(\"values\");\n\t        var temp;\n\t        values.data.each(webix.bind(function (obj) {\n\t            for (var j = 0; j < obj.operation.length; j++) {\n\t                temp = webix.copy(obj);\n\t\n\t                webix.extend(temp, { operation: obj.operation[j], color: obj.color[j] || webix.$$(this.config.pivot).config.color }, true);\n\t\n\t                structure.values.push(temp);\n\t            }\n\t        }, this));\n\t\n\t        var filters = this.$$(\"filters\");\n\t        filters.data.each(function (obj) {\n\t            structure.filters.push(obj);\n\t        });\n\t\n\t        return structure;\n\t    }\n\t}, webix.ui.window, webix.IdSpace);\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** pivot.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 39c3f3d6a33418b789e9\n **/","import \"less/pivot.less\";\n\nimport \"locale.js\";\nimport \"views/menu.js\";\nimport \"pivottable.js\";\nimport \"pivotchart.js\";\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/pivot.js\n **/","webix.i18n.pivot = webix.extend((webix.i18n.pivot||{}),{\n    apply: \"Apply\",\n    bar: \"Bar\",\n    cancel: \"Cancel\",\n    chartType: \"Chart type\",\n    columns: \"Columns\",\n    count: \"count\",\n    date: \"date\",\n    fields: \"Fields\",\n    filters: \"Filters\",\n    groupBy: \"Group By\",\n    line: \"Line\",\n    logScale: \"Logarithmic scale\",\n    max: \"max\",\n    min: \"min\",\n    multiselect: \"multi-select\",\n    operationNotDefined: \"Operation is not defined\",\n    layoutIncorrect: \"pivotLayout should be an Array instance\",\n    pivotMessage: \"[Click to configure]\",\n    popupHeader: \"Pivot Settings\",\n    radar: \"Radar\",\n    radarArea: \"Area Radar\",\n    rows: \"Rows\",\n    select: \"select\",\n    settings: \"Settings\",\n    stackedBar: \"Stacked Bar\",\n    sum: \"sum\",\n    text: \"text\",\n    total: \"Total\",\n    values: \"Values\",\n    valuesNotDefined: \"Values or Group field are not defined\",\n    windowTitle: \"Pivot Configuration\",\n    windowMessage: \"move fields into a required sector\"\n});\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/locale.js\n **/","webix.protoUI({\n    name:\"webix_pivot_popup\",\n    _selected: null,\n    $init: function(config) {\n        webix.extend(config, this._get_ui(config));\n        this.$ready.push(this._after_init);\n    },\n    _get_ui: function(config) {\n        return {\n            body: {\n                id:\"list\", view:\"list\", borderless: true, autoheight: true, template:\"#title#\", data: config.data\n            }\n        };\n    },\n    _after_init: function() {\n        this.attachEvent(\"onItemClick\", function(id){\n            this._selected = this.$eventSource.getItem(id);\n            this.hide();\n        });\n    },\n    getSelected: function() {\n        return this._selected;\n    }\n}, webix.ui.popup, webix.IdSpace);\n\n\n/** WEBPACK FOOTER **\n ** ./sources/views/menu.js\n **/","import * as flt from \"filters.js\";\nimport \"ext/filters.js\";\nimport \"views/tablepopup.js\";\n\nwebix.protoUI({\n\tname:\"pivot\",\n\tversion:\"{{version}}\",\n\tdefaults: {\n\t\tfieldMap: {},\n\t\tyScaleWidth: 300,\n\t\tcolumnWidth: 150,\n\t\tfilterLabelAlign: \"right\",\n\t\tfilterWidth: 300,\n\t\tfilterMinWidth: 150,\n\t\tfilterLabelWidth: 100\n\n\t},\n\t$divider: \"_'_\",\n\t$init: function(config) {\n\t\tif (!config.structure)\n\t\t\tconfig.structure = {};\n\t\twebix.extend(config.structure, { rows:[], columns:[], values:[], filters:[] });\n\n\t\tthis.$view.className +=\" webix_pivot\";\n\t\twebix.extend(config, this._get_ui(config));\n\t\tthis.$ready.push(this.render);\n\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(function() {\n\t\t\t// call render if pivot is initialized\n\t\t\tif (this.$$(\"data\")) this.render();\n\t\t}, this));\n\t},\n\t_get_ui: function(config) {\n\t\tvar filters = { id:\"filters\", view:\"toolbar\", hidden:true, cols:[\n\t\t\t{  }\n\t\t]};\n\n\t\tvar table = {\n\t\t\tview:\"treetable\",\n\t\t\tid:\"data\",\n\t\t\tselect: \"row\",\n\t\t\tnavigation:true,\n\t\t\tleftSplit:1,\n\t\t\tresizeColumn:true,\n\t\t\ton:{\n\t\t\t\t\"onHeaderClick\": function(id){\n\t\t\t\t\tvar pivot = this.getTopParentView();\n\t\t\t\t\tif (this.getColumnIndex(id.column) === 0 && !pivot.config.readonly)\n\t\t\t\t\t\tpivot.configure();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcolumns:[\n\t\t\t\t{ }\n\t\t\t]\n\t\t};\n\n\t\tif(config.datatable && typeof config.datatable == \"object\" ){\n\t\t\tdelete config.datatable.id;\n\t\t\twebix.extend(table,config.datatable,true);\n\t\t}\n\n\t\treturn { rows: [ filters, table ] };\n\t},\n\tconfigure: function() {\n\t\tif (!this._config_popup) {\n\t\t\tvar config = { view:\"webix_pivot_config\", operations:[], pivot: this.config.id };\n\t\t\twebix.extend(config , this.config.popup||{});\n\t\t\tthis._config_popup = webix.ui(config);\n\t\t\tthis.callEvent(\"onPopup\",[this._config_popup]);\n\t\t\tthis._config_popup.attachEvent(\"onApply\", webix.bind(function(structure) {\n\t\t\t\tthis.define(\"structure\", structure);\n\t\t\t\tthis.render();\n\t\t\t}, this));\n\t\t}\n\n\t\tvar functions = [];\n\t\tfor (var i in this.operations) functions.push({name: i, title: this._apply_locale(i)});\n\n\t\tthis._config_popup.define(\"operations\", functions);\n\t\tvar pos = webix.html.offset(this.$$(\"data\").getNode());\n\t\tthis._config_popup.setPosition(pos.x + 10, pos.y + 10);\n\t\tthis._config_popup.define(\"data\", this.getFields());\n\t\tthis._config_popup.show();\n\t},\n\n\trender: function(without_filters) {\n\t\tvar data = this._process_data(this.data.pull, this.data.order);\n\n\t\tif(this.config.footer)\n\t\t\tthis._add_footer(data.header);\n\n\t\tif (!without_filters) {\n\t\t\tdata.filters = this._process_filters();\n\t\t}\n\n\t\tthis.callEvent(\"onBeforeRender\",[data]);\n\n\t\tif (data.filters) {\n\t\t\tvar filters = data.filters;\n\t\t\tif (filters.length > 0) {\n\t\t\t\tthis.$$(\"filters\").show();\n\t\t\t\tthis.$$(\"filters\").define(\"cols\", filters);\n\t\t\t\tthis._filter_events();\n\t\t\t} else {\n\t\t\t\tthis.$$(\"filters\").hide();\n\t\t\t}\n\t\t}\n\t\tif(this.config.totalColumn)\n\t\t\tthis.$$(\"data\").define(\"math\", true);\n\n\t\tthis.$$(\"data\").config.columns = data.header;\n\n\n\n\t\tthis.$$(\"data\").refreshColumns();\n\t\tthis.$$(\"data\").clearAll();\n\t\tthis.$$(\"data\").parse(data.data);\n\n\n\t},\n\t_add_footer: function(columns){\n\t\tvar config, grid, i, names;\n\n\t\tgrid = this.$$(\"data\");\n\t\tgrid.define(\"footer\",true);\n\t\t\n\t\tif(columns.length)\n\t\t\tcolumns[0].footer = this._apply_locale(\"total\");\n\n\t\tfor(i=1; i < columns.length;i++){\n\t\t\tconfig = null;\n\n\t\t\tif(this.config.footer == \"sumOnly\"){\n\t\t\t\tnames = columns[i].id.split(this.$divider);\n\t\t\t\tif(names[names.length-2] != \"sum\")\n\t\t\t\t\tconfig = \" \";\n\t\t\t}\n\n\t\t\tif(!config)\n\t\t\t\tconfig = {\n\t\t\t\t\tcontent: \"pivotSumColumn\",\n\t\t\t\t\ttemplate:  webix.bind(function(data){\n\t\t\t\t\t\tvar value = data.value;\n\t\t\t\t\t\treturn (value&& value!=\"0\"&&!this.format?parseFloat(value).toFixed(3):value);\n\t\t\t\t\t},columns[i])\n\t\t\t\t};\n\n\t\t\tcolumns[i].footer = config;\n\n\t\t\tif(typeof this.config.footer == \"object\"){\n\t\t\t\twebix.extend(columns[i].footer, this.config.footer, true);\n\t\t\t}\n\t\t}\n\t},\n\t$exportView:function(options){\n\t\twebix.extend(options, { filterHTML: true });\n\t\treturn this.$$(\"data\");\n\t},\n\t_apply_locale: function(value){\n\t\treturn webix.i18n.pivot[value]||value;\n\t},\n\t_apply_map: function(value){\n\t\treturn this.config.fieldMap[value]||value;\n\t},\n\t_process_filters: function() {\n\t\tvar filters = this.config.structure.filters || [];\n\t\tvar items = [];\n\t\tfor (var i = 0; i < filters.length; i++) {\n\t\t\tvar f = filters[i];\n\t\t\tvar item = { value: f.value, label: this._apply_map(f.name), field: f.name, view: f.type,\n\t\t\t\tlabelAlign: this.config.filterLabelAlign, labelWidth: this.config.filterLabelWidth, minWidth: this.config.filterMinWidth, maxWidth: this.config.filterWidth\n\t\t\t};\n\t\t\tif (f.type == \"select\" || f.type == \"multiselect\")\n\t\t\t\titem.options = this._distinct_values(f.name, f.type != \"multiselect\");\n\t\t\titems.push(item);\n\t\t}\n\t\treturn items;\n\t},\n\n\t_distinct_values: function(field, empty) {\n\t\tvar values = [];\n\t\tif(empty)\n\t\t\tvalues.push({value:\"\",id:\"\"});\n\t\tvar data = this.data.pull;\n\t\tvar hash = {};\n\t\tfor (var obj in data) {\n\t\t\tvar value = data[obj][field];\n\t\t\tif (!webix.isUndefined(value)){\n\t\t\t\tif (!hash[value]) {\n\t\t\t\t\tvalues.push({ value:value, id:value });\n\t\t\t\t\thash[value] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar isNumeric = function(n){\n\t\t\treturn  !isNaN(parseFloat(n));\n\t\t};\n\t\tvalues.sort(function(a,b) {\n\t\t\tvar val1 = a.value;\n\t\t\tvar val2 = b.value;\n\t\t\tif (!val2) return 1;\n\t\t\tif (!val1) return -1;\n\t\t\tif(!isNumeric(val1) || !isNumeric(val2) ){\n\t\t\t\tval1 = val1.toString().toLowerCase();\n\t\t\t\tval2=val2.toString().toLowerCase();\n\t\t\t}\n\t\t\treturn val1>val2?1:(val1<val2?-1:0);\n\t\t});\n\t\treturn values;\n\t},\n\n\t_filter_events: function() {\n\t\tvar filters = this.$$(\"filters\");\n\t\tfilters.reconstruct();\n\n\t\tvar children = filters.getChildViews();\n\t\tvar pivot = this;\n\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\tvar el = children[i];\n\t\t\tif (el.name == \"select\" || el.name == \"multiselect\" || el.name == \"datepicker\")\n\t\t\t\tel.attachEvent(\"onChange\", function(newvalue) {\n\t\t\t\t\tpivot._set_filter_value(this.config.field, newvalue);\n\t\t\t\t});\n\t\t\telse\n\t\t\t\tel.attachEvent(\"onTimedKeyPress\", function() {\n\t\t\t\t\tpivot._set_filter_value(this.config.field, this.getValue());\n\t\t\t\t});\n\t\t}\n\t},\n\n\t_set_filter_value: function(field, value) {\n\t\tvar filters = this.config.structure.filters;\n\t\tfor (var i = 0; i < filters.length; i++)\n\t\t\tif (filters[i].name == field) {\n\t\t\t\tfilters[i].value = value;\n\t\t\t\tthis.render(true);\n\t\t\t\treturn true;\n\t\t\t}\n\t\treturn false;\n\t},\n\n\t_process_data: function(data, order) {\n\t\tthis._init_filters();\n\n\t\tvar structure = this.config.structure;\n\t\tstructure._header = [];\n\t\tstructure._header_hash = {};\n\n\t\tfor (let i = 0; i < structure.values.length; i++) {\n\t\t\tstructure.values[i].operation = structure.values[i].operation || [\"sum\"];\n\t\t\tif (!webix.isArray(structure.values[i].operation))\n\t\t\t\tstructure.values[i].operation = [structure.values[i].operation];\n\t\t}\n\t\tvar columns = [];\n\n\t\tfor(let i=0;i< structure.columns.length; i++){\n\t\t\tcolumns[i] = (typeof structure.columns[i] == \"object\"?(structure.columns[i].id||i):structure.columns[i]);\n\t\t}\n\n\t\tvar fields = structure.rows.concat(columns);\n\n\t\tvar items = this._group(data, order, fields);\n\t\tvar header = {};\n\t\tif (structure.rows.length > 0)\n\t\t\titems = this._process_rows(items, structure.rows, structure, header);\n\t\telse {\n\t\t\t// there are no rows in structure, only columns and values\n\t\t\tthis._process_columns(items, columns, structure, header);\n\t\t\titems = [];\n\t\t}\n\t\theader = this._process_header(header);\n\t\treturn { header: header, data: items };\n\t},\n\t_groupItem: function( hash, item, fields ){\n\t\tif(fields.length){\n\t\t\tvar value = item[fields[0]];\n\t\t\tif(webix.isUndefined(hash[value]))\n\t\t\t\thash[value] = {};\n\t\t\tthis._groupItem(hash[value], item, fields.slice(1));\n\t\t}\n\t\telse\n\t\t\thash[item.id] = item;\n\t},\n\t_group: function( data, order, fields ){\n\t\tvar id, item, i, j, value,\n\t\t\thash = {};\n\n\t\tfor (i = 0; i < order.length; i++) {\n\t\t\tid = order[i];\n\t\t\titem = data[id];\n\t\t\tif (item && this._filter_item(item)){\n\t\t\t\tthis._groupItem( hash, item, fields );\n\t\t\t}\n\t\t}\n\t\treturn hash;\n\t},\n\t_process_rows: function(data, rows, structure, header) {\n\t\tvar items = [];\n\t\tif (rows.length > 1) {\n\t\t\tfor (let i in data)\n\t\t\t\tdata[i] = this._process_rows(data[i], rows.slice(1), structure, header);\n\n\t\t\tvar values = structure._header;\n\n\t\t\tfor (let i in data) {\n\t\t\t\tlet item = { data: data[i] };\n\t\t\t\tfor (var j = 0; j < item.data.length; j++) {\n\t\t\t\t\tfor (var k = 0; k < values.length; k++) {\n\t\t\t\t\t\tvar value = values[k];\n\t\t\t\t\t\tif (webix.isUndefined(item[value]))\n\t\t\t\t\t\t\titem[value] = [];\n\t\t\t\t\t\titem[value].push(item.data[j][value]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\titem = this._calculate_item(item, structure);\n\t\t\t\titem = this._minmax_in_row(item, structure);\n\t\t\t\titem.name = i;\n\t\t\t\titem.open = true;\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i in data) {\n\t\t\t\tlet item = this._process_columns(data[i], this.config.structure.columns, structure, header);\n\t\t\t\titem.name = i;\n\t\t\t\titem = this._calculate_item(item, structure);\n\t\t\t\titem = this._minmax_in_row(item, structure);\n\t\t\t\titems.push(item);\n\t\t\t}\n\t\t}\n\t\treturn items;\n\t},\n\n\t_process_columns: function(data, columns, structure, header, item, name) {\n\t\tvar vname;\n\t\titem = item || {};\n\t\tif (columns.length > 0) {\n\t\t\tname = name || \"\";\n\t\t\tfor (let i in data) {\n\t\t\t\tif(!header[i])\n\t\t\t\t\theader[i] = {};\n\t\t\t\tdata[i] = this._process_columns(data[i], columns.slice(1), structure, header[i], item, (name.length>0 ? (name + this.$divider) :\"\") + i);\n\t\t\t}\n\t\t} else {\n\t\t\tvar values = this.config.structure.values;\n\t\t\tfor (var id in data) {\n\t\t\t\tfor (let i = 0; i < values.length; i++) {\n\t\t\t\t\tfor (var j = 0; j < values[i].operation.length; j++) {\n\t\t\t\t\t\tif(name)\n\t\t\t\t\t\t\tvname = name + this.$divider + values[i].operation[j] + this.$divider + values[i].name;\n\t\t\t\t\t\telse // if no columns\n\t\t\t\t\t\t\tvname = values[i].operation[j] + this.$divider + values[i].name;\n\t\t\t\t\t\tif (!structure._header_hash[vname]) {\n\t\t\t\t\t\t\tstructure._header.push(vname);\n\t\t\t\t\t\t\tstructure._header_hash[vname] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (webix.isUndefined(item[vname])) {\n\t\t\t\t\t\t\titem[vname] = [];\n\t\t\t\t\t\t\theader[values[i].operation[j] + this.$divider + values[i].name] = {};\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\titem[vname].push(data[id][values[i].name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn item;\n\t},\n\t_sort_header: function(header){\n\t\tvar columns = this.config.structure.columns;\n\t\tvar sorted = false;\n\n\t\tvar isSorting = false;\n\t\tfor(let i = 0; i < columns.length && !isSorting; i++){\n\t\t\tif(typeof columns[i] == \"object\" && columns[i].sort)\n\t\t\t\tisSorting = true;\n\t\t}\n\t\tif(!isSorting)\n\t\t\treturn false;\n\n\t\theader.sort(function(a,b){\n\t\t\tvar order = null;\n\t\t\tvar res;\n\t\t\tfor(let i=0; i < columns.length && order===null; i++){\n\t\t\t\tvar c = columns[i];\n\t\t\t\tif(typeof c == \"object\" && c.sort){\n\n\t\t\t\t\tvar sortFunction = c.sort;\n\t\t\t\t\tif(typeof c.sort == \"string\")\n\t\t\t\t\t\tsortFunction = webix.DataStore.prototype.sorting.as[c.sort];\n\t\t\t\t\tres = sortFunction(a[i].text,b[i].text);\n\n\t\t\t\t\tif(res || i == (columns.length-1)){\n\t\t\t\t\t\tsorted = true;\n\t\t\t\t\t\tif(c.sortDir == \"desc\"){\n\t\t\t\t\t\t\tres = res*(-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\torder = res;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\torder = 0;\n\t\t\t}\n\t\t\treturn order;\n\t\t});\n\n\n\t\tif(header[0]){\n\t\t\tvar j = header[0].length-2;\n\t\t\twhile(j>=0){\n\t\t\t\tvar text = \"\";\n\t\t\t\tvar index=0;\n\t\t\t\tfor(let i=0; i < header.length;i++){\n\t\t\t\t\tif(text != header[i][j].text){\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\ttext = header[i][j].text;\n\t\t\t\t\t\theader[i][j].colspan = 1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tdelete header[i][j].colspan;\n\t\t\t\t\t\theader[index][j].colspan++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tj--;\n\t\t\t}\n\t\t}\n\n\t},\n\t_process_header: function(header) {\n\t\theader = this._render_header(header);\n\n\t\tthis._sort_header(header);\n\t\tvar vConfig,\n\t\t\tvaluesConfig = this.config.structure.values;\n\n\t\tfor (var i = 0; i < header.length; i++) {\n\t\t\tvar parts = [];\n\t\t\tfor (let j = 0; j < header[i].length; j++)\n\t\t\t\tparts.push(header[i][j].name);\n\n\t\t\t// find value configuration\n\t\t\tvConfig = null;\n\t\t\tvar tmp = parts[parts.length-1].split(this.$divider);\n\t\t\tfor(let j =0; j < valuesConfig.length && !vConfig; j++){\n\t\t\t\tif(valuesConfig[j].operation)\n\t\t\t\t\tfor(var p =0; p< valuesConfig[j].operation.length; p++){\n\t\t\t\t\t\tif(valuesConfig[j].name == tmp[1] && valuesConfig[j].operation[p] == tmp[0]){\n\t\t\t\t\t\t\tvConfig = valuesConfig[j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\theader[i] = {id: parts.join(this.$divider), header: header[i], sort:\"int\", width: this.config.columnWidth};\n\t\t\t// add format\n\t\t\tif(vConfig && vConfig.format)\n\t\t\t\theader[i].format = vConfig.format;\n\t\t}\n\n\t\tthis.callEvent(\"onHeaderInit\", [header]);\n\n\t\tif(this.config.totalColumn && header.length){\n\t\t\theader = this._add_total_columns(header);\n\t\t}\n\n\t\tvar text0 = \"<div class='webix_pivot_config_msg'>\"+webix.i18n.pivot.pivotMessage+\"</div>\";\n\n\t\tif(this.config.readonly){\n\t\t\ttext0 = this.config.readonlyTitle||\"\";\n\t\t\tthis.$$(\"data\").$view.className += \" webix_pivot_readonly\";\n\t\t}\n\t\theader.splice(0, 0, {id:\"name\", exportAsTree:true, template:\"{common.treetable()} #name#\", header:{ text:  text0}, width: this.config.yScaleWidth});\n\n\t\treturn header;\n\t},\n\t_add_total_columns: function(header){\n\t\tvar arr, h, i, j,\n\t\t\tfound = false,\n\t\t\tindex= 0,\n\t\t\ttotalCols = [];\n\n\t\t// if no columns in selected\n\t\tif(header[0].header.length < 2)\n\t\t\treturn header;\n\n\t\ti = header.length-1;\n\n\t\twhile(!found && i){\n\t\t\tif(header[i].header[0].name != header[i-1].header[0].name){\n\t\t\t\tfound = true;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t\ti--;\n\t\t}\n\t\tvar c =0;\n\t\tfor(i = index; i< header.length; i++){\n\t\t\th = webix.copy(header[i]);\n\t\t\tarr =[];\n\t\t\tfound = true;\n\t\t\tif(this.config.totalColumn == \"sumOnly\"){\n\t\t\t\tvar parts = h.id.split(this.$divider);\n\t\t\t\tvar operation = parts[parts.length-2];\n\t\t\t\tif(operation != \"sum\")\n\t\t\t\t\tfound = false;\n\n\t\t\t}\n\t\t\tif(found){\n\t\t\t\tfor(j = c+1; j< header.length+1; j += (header.length-index)){\n\t\t\t\t\tarr.push(\"[$r,:\"+j+\"]\");\n\t\t\t\t}\n\t\t\t\th.math = arr.join(\"+\");\n\n\t\t\t\tif(!h.format)\n\t\t\t\t\th.format = function(value){\n\t\t\t\t\t\treturn (value&& value!=\"0\"?parseFloat(value).toFixed(3):value);\n\t\t\t\t\t};\n\n\t\t\t\tif(typeof this.config.totalColumn == \"object\"){\n\t\t\t\t\twebix.extend(h, this.config.totalColumn, true);\n\t\t\t\t}\n\n\t\t\t\th.id = h.id.replace(h.header[0].name,\"$webixtotal\");\n\t\t\t\th.header[0].name = \"total\";\n\t\t\t\th.header[0].text = this._apply_locale(\"total\");\n\t\t\t\ttotalCols.push(h);\n\t\t\t}\n\n\t\t\tc++;\n\t\t}\n\t\ttotalCols = this._correct_colspan(totalCols);\n\t\treturn header.concat(totalCols);\n\t},\n\t_correct_colspan: function(header){\n\t\tif(header[0]){\n\t\t\tvar j = header[0].header.length-2;\n\t\t\twhile(j>=0){\n\t\t\t\tvar text = \"\";\n\t\t\t\tvar index=0;\n\t\t\t\tfor(var i=0; i < header.length;i++){\n\t\t\t\t\tif(text != header[i].header[j].text){\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\ttext = header[i].header[j].text;\n\t\t\t\t\t\theader[i].header[j].colspan = 1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tdelete header[i].header[j].colspan;\n\t\t\t\t\t\theader[index].header[j].colspan++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tj--;\n\t\t\t}\n\t\t}\n\t\treturn header;\n\t},\n\t_render_header: function(data) {\n\n\t\tvar header = [];\n\n\t\tfor (var i in data) {\n\n\t\t\t// is the last level?\n\t\t\tvar empty = true;\n\t\t\t//noinspection JSUnusedLocalSymbols\n\t\t\tfor (var k in data[i]) {\n\t\t\t\tempty = false;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!empty) {\n\t\t\t\tdata[i] = this._render_header(data[i]);\n\t\t\t\tvar first = false;\n\t\t\t\tfor (var j = 0; j < data[i].length; j++) {\n\t\t\t\t\tvar h = data[i][j];\n\t\t\t\t\th.splice(0, 0, { name:i, text: i});\n\t\t\t\t\tif (!first) {\n\t\t\t\t\t\th[0].colspan = data[i].length;\n\t\t\t\t\t\tfirst = true;\n\t\t\t\t\t}\n\t\t\t\t\theader.push(h);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar tmp = i.split(this.$divider);\n\n\t\t\t\tif (tmp.length > 1){\n\t\t\t\t\theader.push([{ name:i, text: this._apply_map(tmp[1]) + \" (\" + this._apply_locale(tmp[0]) + \")\" }]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t// there are no values in structure, only rows and columns\n\t\t\t\t\theader.push([{ name:i, text: i}]);\n\t\t\t}\n\t\t}\n\n\t\treturn header;\n\t},\n\t_get_key_leaves: function(data,key, result){\n\t\tfor(var i=0; i < data.length;i++){\n\t\t\tif(data[i].data)\n\t\t\t\tthis._get_key_leaves(data[i].data,key,result);\n\t\t\telse\n\t\t\t\tresult.push(data[i][key]);\n\t\t}\n\t},\n\t_calculate_item: function(item, structure) {\n\t\tvar i, key, leaves, op, tmp, values;\n\n\t\tfor (i = 0; i < structure._header.length; i++) {\n\t\t\tkey = structure._header[i];\n\t\t\ttmp = key.split(this.$divider);\n\n\t\t\top = tmp[tmp.length-2];\n\n\t\t\tvalues = item[key];\n\n\t\t\tleaves = this._operationOptions[op] && this._operationOptions[op].leavesOnly;\n\t\t\tif(leaves && item.data){\n\n\t\t\t\tvalues = [];\n\t\t\t\tthis._get_key_leaves(item.data,key,values);\n\t\t\t}\n\t\t\tif (values){\n\t\t\t\tvar data = [];\n\n\t\t\t\tfor(var j=0; j < values.length;j++){\n\t\t\t\t\tif(values[j] || values[j]==\"0\"){\n\t\t\t\t\t\tdata.push(values[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(data.length)\n\t\t\t\t\titem[key] = this.operations[op].call(this, data, key, item);\n\t\t\t\telse\n\t\t\t\t\titem[key] = '';\n\t\t\t}\n\t\t\telse\n\t\t\t\titem[key] = '';\n\n\t\t\tif(item[key])\n\t\t\t\titem[key] = Math.round(item[key]*100000)/100000;\n\t\t}\n\t\treturn item;\n\t},\n\t_minmax_in_row: function(item, structure) {\n\t\t// nothing to do\n\t\tif (!this.config.min && !this.config.max) return item;\n\n\t\tvar values = this.config.structure.values;\n\t\tif (!item.$cellCss) item.$cellCss = {};\n\n\t\t// calculating for each value\n\t\tfor (var i = 0; i < values.length; i++) {\n\t\t\tvar value = values[i];\n\n\t\t\tvar max=[], max_value=-99999999;\n\t\t\tvar min=[], min_value=99999999;\n\n\t\t\tfor (let j = 0; j < structure._header.length; j++) {\n\t\t\t\tvar key = structure._header[j];\n\t\t\t\tif (window.isNaN(item[key])) continue;\n\t\t\t\t// it's a another value\n\t\t\t\tif (key.indexOf(value.name, this.length - value.name.length) === -1) continue;\n\n\t\t\t\tif (this.config.max && item[key] > max_value) {\n\t\t\t\t\tmax = [ key ];\n\t\t\t\t\tmax_value = item[key];\n\t\t\t\t} else if (item[key] == max_value) {\n\t\t\t\t\tmax.push(key);\n\t\t\t\t}\n\t\t\t\tif (this.config.min && item[key] < min_value) {\n\t\t\t\t\tmin = [ key ];\n\t\t\t\t\tmin_value = item[key];\n\t\t\t\t} else if (item[key] == min_value) {\n\t\t\t\t\tmin.push(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let j = 0; j < min.length; j++) {\n\t\t\t\titem.$cellCss[min[j]] = \"webix_min\";\n\t\t\t}\n\t\t\tfor (let j = 0; j < max.length; j++) {\n\t\t\t\titem.$cellCss[max[j]] = \"webix_max\";\n\t\t\t}\n\t\t}\n\t\treturn item;\n\t},\n\t_operationOptions:{},\n\toperations: {\n\t\tsum: function(args) {\n\t\t\tvar sum = 0;\n\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\tvar value = args[i];\n\t\t\t\tvalue = parseFloat(value, 10);\n\t\t\t\tif (!window.isNaN(value))\n\t\t\t\t\tsum += value;\n\t\t\t}\n\t\t\treturn sum;\n\t\t},\n\t\tcount: function(data, key, item) {\n\t\t\tvar count = 0;\n\t\t\tif(!item.data)\n\t\t\t\tcount = data.length;\n\t\t\telse{\n\t\t\t\tfor(var i=0; i < item.data.length; i++)\n\t\t\t\t\tcount += item.data[i][key]||0;\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\t\tmax: function(args) {\n\t\t\tif (args.length == 1) return args[0];\n\t\t\treturn Math.max.apply(this, args);\n\t\t},\n\t\tmin: function(args) {\n\t\t\tif (args.length == 1) return args[0];\n\t\t\treturn Math.min.apply(this, args);\n\t\t}\n\t},\n\taddOperation: function(name, method, options){\n\t\tthis.operations[name] = method;\n\t\tif(options)\n\t\t\tthis._operationOptions[name] = options;\n\t},\n\tgetFields: function() {\n\t\tvar fields = [];\n\t\tvar fields_hash = {};\n\t\tfor (let i = 0; i < Math.min(this.data.count() || 5); i++) {\n\t\t\tvar item = this.data.getItem(this.data.getIdByIndex(i));\n\t\t\tfor (var field in item) {\n\t\t\t\tif (!fields_hash[field]) {\n\t\t\t\t\tfields.push(field);\n\t\t\t\t\tfields_hash[field] = webix.uid();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar str = this.config.structure;\n\t\tvar result = { fields:[], rows:[], columns:[], values:[], filters:[] };\n\n\t\tfor (let i = 0; i < (str.filters || []).length; i++) {\n\t\t\tlet field = str.filters[i];\n\t\t\tif (!webix.isUndefined(fields_hash[field.name])) {\n\t\t\t\tvar text = this._apply_map(field.name);\n\t\t\t\tresult.filters.push({name: field.name, text: text, type:field.type, value:field.value, id: fields_hash[field]});\n\t\t\t\t//delete fields_hash[field.name]; // filter allows to drag a field multiple times\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < str.rows.length; i++) {\n\t\t\tlet field = str.rows[i];\n\t\t\tif (!webix.isUndefined(fields_hash[field])) {\n\t\t\t\tresult.rows.push({name: field, text: this._apply_map(field), id: fields_hash[field]});\n\t\t\t\tdelete fields_hash[field];\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < str.columns.length; i++) {\n\t\t\tlet field = (typeof str.columns[i] == \"object\"? (str.columns[i].id||i): str.columns[i]);\n\t\t\tif (!webix.isUndefined(fields_hash[field])) {\n\t\t\t\tresult.columns.push({name: field, text: this._apply_map(field), id: fields_hash[field]});\n\t\t\t\tdelete fields_hash[field];\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < str.values.length; i++) {\n\t\t\tlet field = str.values[i];\n\t\t\tif (!webix.isUndefined(fields_hash[field.name])) {\n\t\t\t\tlet text = this._apply_map(field.name);\n\t\t\t\tresult.values.push({name: field.name, text: text, operation:field.operation, id: fields_hash[field.name]});\n\t\t\t\t//delete fields_hash[field.name];   // values allows to drag a field multiple times\n\t\t\t}\n\t\t}\n\n\n\t\tfor (let i = 0; i < fields.length; i++) {\n\t\t\tlet field = fields[i];\n\t\t\tif (!webix.isUndefined(fields_hash[field]))\n\t\t\t\tresult.fields.push({name:field, text: this._apply_map(field), id: fields_hash[field]});\n\t\t}\n\t\treturn result;\n\t},\n\t_init_filters: function() {\n\t\tvar filters = this.config.structure.filters || [];\n\t\tflt.init(filters);\n\t},\n\t_filter_item: function(item) {\n\t\tvar filters = this.config.structure.filters || [];\n\t\treturn flt.filterItem(filters, item);\n\t},\n\tsetStructure: function(config){\n\t\tthis.define(\"structure\", config);\n\t\tthis.render();\n\t},\n\tgetStructure: function() {\n\t\treturn this.config.structure;\n\t},\n\tgetConfigWindow: function(){\n\t\treturn this._config_popup;\n\t},\n\tprofile_setter:function(value){\n\t\tvar c = window.console;\n\t\tif (value){\n\t\t\tthis.attachEvent(\"onBeforeLoad\", function(){ c.time(\"data loading\");  });\n\t\t\tthis.data.attachEvent(\"onParse\", function(){ c.timeEnd(\"data loading\"); c.time(\"data parsing\");  });\n\t\t\tthis.data.attachEvent(\"onStoreLoad\", function(){ c.timeEnd(\"data parsing\"); c.time(\"data processing\");  });\n\t\t\tthis.$ready.push(function(){\n\t\t\t\tthis.$$(\"data\").attachEvent(\"onBeforeRender\", function(){ if (this.count()) { c.timeEnd(\"data processing\"); c.time(\"data rendering\"); } });\n\t\t\t\tthis.$$(\"data\").attachEvent(\"onAfterRender\", function(){ if (this.count()) webix.delay(function(){ c.timeEnd(\"data rendering\"); });  });\n\t\t\t});\n\t\t}\n\t}\n}, webix.IdSpace, webix.ui.layout, webix.DataLoader, webix.EventSystem, webix.Settings);\n\n\n\n/** WEBPACK FOOTER **\n ** ./sources/pivottable.js\n **/","function numHelper(fvalue, value, func) {\n    if(typeof fvalue == \"object\"){\n        for(var i=0; i < fvalue.length; i++){\n            fvalue[i] = window.parseFloat(fvalue[i]);\n            if (window.isNaN(fvalue[i])) return true;\n        }\n    }\n    else{\n        fvalue = window.parseFloat(fvalue);\n        // if filter value is not a number then ignore such filter\n        if (window.isNaN(fvalue)) return true;\n    }\n    // if row value is not a number then don't show this row\n    if (window.isNaN(value)) return false;\n    return func(fvalue, value);\n}\n\nexport const rules = {\n    contains: function(fvalue, value) {\n        return value.indexOf(fvalue.toString().toLowerCase()) >= 0;\n    },\n    equal: function(fvalue, value) {\n        return numHelper(fvalue, value, function(fvalue, value) {\n            return (fvalue == value);\n        });\n    },\n    not_equal: function(fvalue, value) {\n        return numHelper(fvalue, value, function(fvalue, value) {\n            return (fvalue != value);\n        });\n    },\n    less: function(fvalue, value) {\n        return numHelper(fvalue, value, function(fvalue, value) {\n            return (value < fvalue);\n        });\n    },\n    less_equal: function(fvalue, value) {\n        return numHelper(fvalue, value, function(fvalue, value) {\n            return (value <= fvalue);\n        });\n    },\n    more: function(fvalue, value) {\n        return numHelper(fvalue, value, function(fvalue, value) {\n            return (value > fvalue);\n        });\n    },\n    more_equal: function(fvalue, value) {\n        return numHelper(fvalue, value, function(fvalue, value) {\n            return (value >= fvalue);\n        });\n    },\n    multi: function(fvalues, value){\n        var result = false;\n        fvalues = fvalues.split(\",\");\n        for(var i=0; i < fvalues.length; i++){\n            result = result|| (value.indexOf(fvalues[i].toString().toLowerCase()) >= 0);\n        }\n        return result;\n    },\n    range: function(fvalue, value){\n        return numHelper(fvalue, value, function(fvalue, value) {\n            return (value < fvalue[1] && value >= fvalue[0]);\n        });\n    },\n    range_inc: function(fvalue, value){\n        return numHelper(fvalue, value, function(fvalue, value) {\n            return (value <= fvalue[1] && value >= fvalue[0]);\n        });\n    }\n};\n\nexport function init(filters){\n    for (var i = 0; i < filters.length; i++) {\n        var f = filters[i];\n\n        var fvalue = (f.value || \"\");\n        if(webix.isDate(fvalue)){\n            fvalue = webix.i18n.parseFormatStr(fvalue);\n        }\n        else if(typeof fvalue == \"string\"){\n            if(fvalue.trim)\n                fvalue = fvalue.trim();\n        }\n\n        if (fvalue.substr(0,1) == \"=\") {\n            f.func = rules.equal;\n            fvalue = fvalue.substr(1);\n        } else if (fvalue.substr(0,2) == \"<>\") {\n            f.func = rules.not_equal;\n            fvalue = fvalue.substr(2);\n        } else if (fvalue.substr(0,2) == \">=\") {\n            f.func = rules.more_equal;\n            fvalue = fvalue.substr(2);\n        } else if (fvalue.substr(0,1) == \">\") {\n            f.func = rules.more;\n            fvalue = fvalue.substr(1);\n        } else if (fvalue.substr(0,2) == \"<=\") {\n            f.func = rules.less_equal;\n            fvalue = fvalue.substr(2);\n        } else if (fvalue.substr(0,1) == \"<\") {\n            f.func = rules.less;\n            fvalue = fvalue.substr(1);\n        }else if (fvalue.indexOf(\"...\") > 0) {\n            f.func = rules.range;\n            fvalue = fvalue.split(\"...\");\n        }else if (fvalue.indexOf(\"..\") > 0) {\n            f.func = rules.range_inc;\n            fvalue = fvalue.split(\"..\");\n        } else if(f.type == \"multiselect\"){\n            f.func = rules.multi;\n        } else if(f.type == \"datepicker\"){\n            f.func = function(fvalue, value) {\n                return fvalue == value;\n            };\n        }else\n            f.func = rules.contains;\n\n        f.fvalue = fvalue;\n    }\n}\n\nexport function filterItem(filters, item){\n    for (var i = 0; i < filters.length; i++) {\n        var f = filters[i];\n        if (f.fvalue){\n            if (webix.isUndefined(item[f.name]))\n                return false;\n\n            var value = item[f.name].toString().toLowerCase();\n            var result = f.func(f.fvalue, value);\n\n            if (!result)\n                return false;\n        }\n    }\n    return true;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./sources/filters.js\n **/","webix.ui.datafilter.pivotSumColumn = webix.extend({\n    refresh:function(master, node, value){\n        var result = 0;\n        master.mapCells(null, value.columnId, null, 1, function(value, id){\n            if (!isNaN(value) && master.getItem(id).$level == 1)\n                result+=value*1;\n            return value;\n        });\n\n        if (value.format)\n            result = value.format(result);\n        if (value.template)\n            result = value.template({value:result});\n\n        node.firstChild.innerHTML = result;\n    }\n}, webix.ui.datafilter.summColumn);\n\n\n/** WEBPACK FOOTER **\n ** ./sources/ext/filters.js\n **/","webix.protoUI({\n    name: \"webix_pivot_config\",\n\n    $init: function(config) {\n        this.$view.className += \" webix_popup webix_pivot\";\n        webix.extend(config,this.defaults);\n        webix.extend(config, this._get_ui(config));\n        this.$ready.push(this._after_init);\n    },\n    defaults:{\n        padding:8,\n        height: 500,\n        width: 700,\n        cancelButtonWidth: 100,\n        applyButtonWidth: 100,\n        fieldsColumnWidth: 180,\n        head: false,\n        modal:true,\n        move: true\n    },\n    _get_ui: function(config) {\n        return {\n            head:{\n                /*type: \"space\",\n                 margin: 5,\n                 padding: 5,\n                 borderless: true,*/\n                view:\"toolbar\",\n                //height: 45,\n                cols: [\n                    { id: \"config_title\", view: \"label\", label: webix.i18n.pivot.windowTitle||\"\"},\n                    { view: \"button\", id: \"cancel\",  label: webix.i18n.pivot.cancel, width: config.cancelButtonWidth },\n                    { view: \"button\", id: \"apply\", type: \"form\",  label: webix.i18n.pivot.apply, width:config.applyButtonWidth }\n\n                ]\n            },\n            body: {\n                type: \"wide\",\n                //  margin: 5,\n                rows:[\n\n                    {\n                        //type: \"wide\",\n\n                        cols: [\n                            // {width:1},\n                            {\n                                width: config.fieldsColumnWidth,\n\n                                rows: [\n                                    { id: \"fieldsHeader\", data:{value: \"fields\"}, css: \"webix_pivot_header_fields\", template: this._popup_templates.popupHeaders, height: 45 },\n                                    { id: \"fields\", view: \"list\", scroll: true, type: {height: \"auto\"}, css: \"\", drag: true, template: \"<span class='webix_pivot_list_marker'></span>#text#\",\n                                        on:{\n                                            onBeforeDropOut: webix.bind(this._check_values_drag,this)\n                                        }\n                                    }\n                                ]\n                            },\n\n                            {\n                                type: \"space\",\n                                rows:[\n                                    {\n                                        type: \"wide\",\n                                        rows: [\n                                            {\n                                                css:\"webix_pivot_transparent\", borderless: true, template: \"<div class='webix_pivot_fields_msg'>\"+webix.i18n.pivot.windowMessage||\"\"+\"</div>\", height: 25\n                                            },\n                                            {\n                                                type: \"wide\",\n                                                cols:[\n\n\n                                                    {\n\n                                                        rows:[\n\n                                                            { id: \"filtersHeader\", data:{value: \"filters\", icon:\"filter\"}, template: this._popup_templates.popupIconHeaders , css: \"webix_pivot_popup_title\", height: 40 },\n                                                            { id: \"filters\", view: \"list\", scroll: false, drag: true, css: \"webix_pivot_values\",\n                                                                template: function (obj) {\n                                                                    obj.type = obj.type || \"select\";\n                                                                    return \"<a class='webix_pivot_link'>\" + obj.text+ \" <span class='webix_link_selection'>\" + obj.type + \"</span></a> \";\n                                                                },\n                                                                type: {\n                                                                    height: 35\n                                                                },\n                                                                onClick: { \"webix_pivot_link\": webix.bind(this._filter_selector, this) },\n                                                                on:{\n                                                                    onBeforeDrop: webix.bind(this._copy_filter_field,this),\n                                                                    onBeforeDropOut: webix.bind(this._check_filter_drag,this)\n                                                                }\n                                                            }\n\n                                                        ]},\n                                                    {\n                                                        rows:[\n                                                            { id: \"columnsHeader\", data:{value: \"columns\", icon:\"columns\"}, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40  },\n                                                            { id: \"columns\", view: \"list\", scroll: false, drag: true, type: {height: 35}, template: \"#text#\" }\n                                                        ]\n                                                    }\n                                                ]},\n                                            {\n                                                type: \"wide\",\n                                                cols:[\n                                                    {\n                                                        rows:[\n                                                            { id: \"rowsHeader\", data:{value: \"rows\", icon:\"list\"}, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40  },\n                                                            { id: \"rows\", view: \"list\", scroll: false, drag: true, template: \"#text#\", type: {height: 35}}\n                                                        ]\n                                                    },\n                                                    {\n                                                        rows:[\n                                                            { id: \"valuesHeader\", data:{value: \"values\", icon: false, iconContent: \"<b>&Sigma;</b>\"}, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40  },\n                                                            { id: \"values\", view: \"list\", scroll: true, drag: true, css: \"webix_pivot_values\", type: { height: \"auto\" },\n                                                                template: webix.bind(this._function_template, this),\n                                                                onClick: {\n                                                                    \"webix_pivot_link\": webix.bind(this._function_selector, this),\n                                                                    \"webix_pivot_plus\": webix.bind(this._function_add, this),\n                                                                    \"webix_pivot_minus\": webix.bind(this._function_remove, this)\n                                                                },\n                                                                on:{\n                                                                    onBeforeDrop: webix.bind(this._copy_values_field,this),\n                                                                    onBeforeDropOut: webix.bind(this._check_values_drag,this)\n                                                                }\n                                                            }\n                                                        ]\n                                                    }\n\n\n\n                                                ]}\n                                        ]\n\n                                    }\n                                ]\n\n\n                            }\n                        ]\n                    }\n                ]\n\n            }\n        };\n    },\n    _popup_templates: {\n        popupHeaders: function(obj){\n            return webix.i18n.pivot[obj.value];\n        },\n        popupIconHeaders: function(obj){\n            if(obj.icon)\n                return \"<span class='webix_pivot_header_icon webix_icon fa-\"+obj.icon+\"'></span>\"+webix.i18n.pivot[obj.value];\n            else\n                return \"<span class='webix_pivot_header_icon'>\"+obj.iconContent+\"</span>\"+webix.i18n.pivot[obj.value];\n        }\n    },\n    _check_values_drag: function(ctx){\n        var from = ctx.from,\n            to = ctx.to;\n        if(to != from){\n            var id = ctx.source[0];\n\n            if(from == this.$$(\"values\")&& to != this.$$(\"filters\")){\n                if(this.$$(\"fields\").getItem(id))\n                    this.$$(\"fields\").remove(id);\n            }\n            else if(to != this.$$(\"values\")){\n                var found = false;\n                if(from == this.$$(\"filters\")){\n                    var name = from.getItem(id).name;\n                    this.$$(\"values\").data.each(function(item){\n                        if(item.name == name){\n                            id = found = item.id;\n                        }\n                    });\n                }\n\n                if(found || from == this.$$(\"fields\") && to != this.$$(\"filters\")){\n                    if(this.$$(\"values\").getItem(id))\n                        this.$$(\"values\").remove(id);\n                }\n            }\n        }\n    },\n    _copy_values_field: function(ctx){\n        if( ctx.to && ctx.from != ctx.to ){\n            var id = ctx.source;\n            var item = ctx.from.getItem(id);\n            if(ctx.from == this.$$(\"fields\")){\n                if(ctx.to.getItem(id)){\n                    this._function_add({},id);\n                }\n                else{\n                    ctx.to.add(webix.copy(item),ctx.index);\n                }\n                return false;\n            }\n            else{\n                if(!this.$$(\"fields\").getItem(id))\n                    this.$$(\"fields\").add(webix.copy(item));\n            }\n\n        }\n        return true;\n    },\n    _copy_filter_field: function(ctx){\n        if(ctx.from != ctx.to){\n            var item = webix.copy(ctx.from.getItem(ctx.start));\n            var name = item.name;\n            delete item.id;\n            var found = false;\n            this.$$(\"filters\").data.each(function(field){\n                if(field.name == name){\n                    found = true;\n                }\n            });\n            if(!found)\n                ctx.to.add(item);\n            return false;\n        }\n        return false;\n    },\n    _check_filter_drag: function(ctx){\n        if(ctx.from && ctx.to && ctx.from != ctx.to){\n            var lists = [\"fields\", \"rows\", \"columns\"];\n            var name = ctx.from.getItem(ctx.start).name;\n            for( var i=0; i< lists.length; i++ ){\n                var sameItem = null;\n                this.$$(lists[i]).data.each(function(item){\n                    if(item.name == name){\n                        sameItem = item;\n                    }\n                });\n                if(sameItem)\n                    this.$$(lists[i]).remove(sameItem.id);\n            }\n            this._check_values_drag(ctx);\n        }\n        return true;\n    },\n    _after_init: function() {\n        this.attachEvent(\"onItemClick\", function(id){\n            var innerId = this.innerId(id);\n            if (innerId == \"cancel\" || innerId == \"apply\"){\n                //transform button clicks to events\n                var structure = this.getStructure();\n\n                if(webix.$$(this.config.pivot).callEvent(\"onBefore\"+innerId, [structure])){\n                    this.callEvent(\"on\"+innerId, [structure]);\n                    this.hide();\n                }\n\n            }\n        });\n    },\n    _function_template: function (obj) {\n        obj.operation = obj.operation || [\"sum\"];\n        if (!webix.isArray(obj.operation))\n            obj.operation = [obj.operation];\n\n        var ops = [];\n        var locale = webix.$$(this.config.pivot)._apply_locale;\n        for (var i = 0; i < obj.operation.length; i++) {\n            var op = \"<span class='webix_pivot_link' webix_operation='\" + i + \"'>\";\n            op += \"<span>\" + obj.text + \"</span>\";\n            op += \"<span class='webix_link_selection'>\" + locale(obj.operation[i]) + \"</span>\";\n            op += \"<span class='webix_pivot_minus webix_icon fa-times'></span>\";\n            op += \"</span>\";\n            ops.push(op);\n        }\n\n        return ops.join(\" \");\n    },\n\n    _function_selector: function(e,id) {\n        var func_selector = {\n            view: \"webix_pivot_popup\", autofit:true,\n            width: 150,\n            data: this.config.operations||[]\n        };\n        var p = webix.ui(func_selector);\n        p.show(e);\n        p.attachEvent(\"onHide\", webix.bind(function() {\n            var index = webix.html.locate(e, \"webix_operation\");\n            var sel = p.getSelected();\n            if (sel !== null) {\n                this.$$(\"values\").getItem(id).operation[index] = sel.name;\n                this.$$(\"values\").updateItem(id);\n            }\n\n            p.close();\n        }, this));\n    },\n\n    _function_add: function(e,id) {\n        var item = this.$$(\"values\").getItem(id);\n        item.operation.push(\"sum\");\n        this.$$(\"values\").updateItem(id);\n\n        webix.delay(function(){\n            var index = item.operation.length-1;\n            var els = this.$$(\"values\").getItemNode(id).childNodes;\n            var el = null;\n            for (var i = 0; i < els.length; i++) {\n                el = els[i];\n                if (!el.getAttribute) continue;\n                var op = el.getAttribute(\"webix_operation\");\n                if (!webix.isUndefined(op) && op == index) break;\n            }\n            if (el!==null)\n                this._function_selector(el, id);\n        }, this);\n    },\n    _function_remove: function(e, id) {\n        var index = webix.html.locate(e, \"webix_operation\");\n        var item = this.$$(\"values\").getItem(id);\n        if (item.operation.length > 1) {\n            item.operation.splice(index, 1);\n            this.$$(\"values\").updateItem(id);\n        } else {\n            this.$$(\"values\").remove(id);\n            //this.$$(\"values\").move(id, null, this.$$(\"fields\"));\n        }\n        return false;\n    },\n\n    _filter_selector: function(e,id) {\n        var locale = webix.$$(this.config.pivot)._apply_locale;\n        var selector = {\n            view: \"webix_pivot_popup\", autofit:true,\n            height: 150, width: 150,\n            data: [\n                {name:\"datepicker\", title: locale(\"date\")},\n                {name:\"multiselect\", title: locale(\"multiselect\")},\n                {name:\"select\", title: locale(\"select\")},\n                {name:\"text\", title: locale(\"text\")}\n            ]\n\n        };\n        var p = webix.ui(selector);\n        p.show(e);\n        p.attachEvent(\"onHide\", webix.bind(function() {\n            var sel = p.getSelected();\n            if (sel !== null) {\n                var item = this.$$('filters').getItem(id);\n                item.type = sel.name;\n                this.$$('filters').updateItem(id);\n            }\n\n            p.close();\n        }, this));\n    },\n\n    data_setter: function(value) {\n        this.$$(\"fields\").clearAll();\n        this.$$(\"fields\").parse(value.fields);\n        this.$$(\"fields\").filter(function(item){\n            return item.name != \"id\";\n        });\n\n        this.$$(\"filters\").clearAll();\n        this.$$(\"filters\").parse(value.filters);\n\n        this.$$(\"columns\").clearAll();\n        this.$$(\"columns\").parse(value.columns);\n\n        this.$$(\"rows\").clearAll();\n        this.$$(\"rows\").parse(value.rows);\n\n        this.$$(\"values\").clearAll();\n        this.$$(\"values\").parse(value.values);\n    },\n    setStructure: function(config){\n        this.define(\"structure\", config);\n        this.render();\n    },\n    getStructure: function() {\n        var structure = { rows:[], columns:[],values:[],filters:[] };\n\n        var rows = this.$$(\"rows\");\n        rows.data.each(function(obj){\n            structure.rows.push(obj.name); });\n\n        var columns = this.$$(\"columns\");\n        columns.data.each(function(obj){\n            structure.columns.push(obj.name); });\n\n\n        var values = this.$$(\"values\");\n        values.data.each(function(obj){\n            structure.values.push(obj); });\n\n        var filters = this.$$(\"filters\");\n        filters.data.each(function(obj){\n            structure.filters.push(obj); });\n\n        return structure;\n    }\n}, webix.ui.window, webix.IdSpace);\n\n\n/** WEBPACK FOOTER **\n ** ./sources/views/tablepopup.js\n **/","import * as flt from \"filters.js\";\nimport \"views/chartpopup.js\";\n\nwebix.protoUI({\n\tname:\"pivot-chart\",\n\tversion:\"{{version}}\",\n\tdefaults: {\n\t\tfieldMap: {},\n\t\trows:[],\n\t\tfilterLabelAlign: \"right\",\n\t\tfilterWidth: 300,\n\t\tfilterMinWidth: 180,\n\t\teditButtonWidth: 110,\n\t\tfilterLabelWidth: 100,\n\t\tchartType: \"bar\",\n\t\tcolor: \"#36abee\",\n\t\tchart:{\n\t\t},\n\t\tsingleLegendItem: 1,\n\t\tpalette: [\n\t\t\t[\"#e33fc7\",\"#a244ea\",\"#476cee\",\"#36abee\",\"#58dccd\",\"#a7ee70\"],\n\t\t\t[\"#d3ee36\",\"#eed236\",\"#ee9336\",\"#ee4339\",\"#595959\",\"#b85981\" ],\n\t\t\t[ \"#c670b8\",\"#9984ce\",\"#b9b9e2\",\"#b0cdfa\",\"#a0e4eb\",\"#7faf1b\" ],\n\t\t\t[ \"#b4d9a4\", \"#f2f79a\",\"#ffaa7d\", \"#d6806f\", \"#939393\", \"#d9b0d1\"],\n\t\t\t[\"#780e3b\",\"#684da9\",\"#242464\",\"#205793\",\"#5199a4\", \"#065c27\"],\n\t\t\t[\"#54b15a\",\"#ecf125\",\"#c65000\",\"#990001\",\"#363636\", \"#800f3e\"]\n\t\t]\n\t},\n\ttemplates:{\n\t\tgroupNameToStr: function(name,operation){\n\t\t\treturn name+\"_\"+operation;\n\t\t},\n\t\tgroupNameToObject: function(name){\n\t\t\tvar arr = name.split(\"_\");\n\t\t\treturn {name:arr[0],operation:arr[1]};\n\t\t},\n\t\tseriesTitle: function(data,i){\n\t\t\tvar name = this.config.fieldMap[data.name]||this._capitalize(data.name);\n\t\t\tvar operation = (webix.isArray(data.operation)?data.operation[i]:data.operation);\n\t\t\treturn name+\" ( \"+(webix.i18n.pivot[operation]||operation)+\")\";\n\t\t}\n\t},\n\ttemplates_setter: function(obj){\n\t\tif(typeof obj == \"object\")\n\t\t\twebix.extend(this.templates,obj);\n\t},\n\tchartMap: {\n\t\tbar: function(color){\n\t\t\treturn {\n\t\t\t\tborder:0,\n\t\t\t\talpha:1,\n\t\t\t\tradius:0,\n\t\t\t\tcolor: color\n\t\t\t};\n\t\t},\n\t\tline: function(color){\n\t\t\treturn {\n\t\t\t\talpha:1,\n\t\t\t\titem:{\n\t\t\t\t\tborderColor: color,\n\t\t\t\t\tcolor: color\n\t\t\t\t},\n\t\t\t\tline:{\n\t\t\t\t\tcolor: color,\n\t\t\t\t\twidth:2\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tradar: function(color){\n\t\t\treturn {\n\t\t\t\talpha:1,\n\t\t\t\tfill: false,\n\t\t\t\tdisableItems: true,\n\t\t\t\titem:{\n\t\t\t\t\tborderColor: color,\n\t\t\t\t\tcolor: color\n\t\t\t\t},\n\t\t\t\tline:{\n\t\t\t\t\tcolor: color,\n\t\t\t\t\twidth:2\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tchartMap_setter: function(obj){\n\t\tif(typeof obj == \"object\")\n\t\t\twebix.extend(this.chartMap,obj,true);\n\t},\n\t$init: function(config) {\n\t\tif (!config.structure)\n\t\t\tconfig.structure = {};\n\t\twebix.extend(config.structure, { groupBy:\"\", values:[], filters:[] });\n\n\t\tthis.$view.className +=\" webix_pivot_chart\";\n\t\twebix.extend(config, {editButtonWidth: this.defaults.editButtonWidth});\n\t\twebix.extend(config, this.getUI(config));\n\n\t\tthis.$ready.push(webix.bind(function(){\n\t\t\twebix.delay(this.render,this); // delay needed for correct legend rendering\n\t\t},this));\n\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(function() {\n\t\t\t// call render if pivot is initialized\n\t\t\tif (this.$$(\"chart\")) this.render(this,arguments);\n\t\t}, this));\n\t},\n\tgetUI: function(config) {\n\t\tvar cols = [];\n\n\n\n\t\tcols.push({ id: \"filters\", hidden:true, cols:[] });\n\t\tif(!config.readonly){\n\t\t\tcols.push(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tid:\"edit\", view: \"icon\", type: \"iconButton\", align: \"right\", icon: \"pencil-square-o\", inputWidth: config.editButtonWidth,\n\t\t\t\t\ttooltip: this._applyLocale(\"settings\"), click: webix.bind(this.configure,this)\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tvar header = {\n\t\t\tpaddingY: 10,\n\t\t\tpaddingX: 5,\n\t\t\tmargin: 10,\n\t\t\tmaxHeight: 5,\n\t\t\tid: \"toolbar\",\n\t\t\tcols: cols\n\t\t};\n\n\t\tvar chart = { id: \"bodyLayout\", type: \"line\", margin: 10, cols:[{id:\"chart\", view: \"chart\"}] };\n\t\treturn { type: \"clean\", rows: [ header, chart ]};\n\t},\n\tconfigure: function() {\n\t\tif (!this.pivotPopup) {\n\t\t\tvar config = { view:\"webix_pivot_chart_config\", operations:[], pivot: this.config.id };\n\t\t\twebix.extend(config , this.config.popup||{});\n\n\t\t\tthis.pivotPopup = webix.ui(config);\n\t\t\tthis.callEvent(\"onPopup\",[this.pivotPopup]);\n\t\t\tthis.pivotPopup.attachEvent(\"onApply\", webix.bind(function(structure) {\n\t\t\t\tthis.config.chartType = this.pivotPopup.$$(\"chartType\")?this.pivotPopup.$$(\"chartType\").getValue():\"bar\";\n\t\t\t\tthis.config.chart.scale = (this.pivotPopup.$$(\"logScale\").getValue()?\"logarithmic\":\"linear\");\n\t\t\t\twebix.extend(this.config.structure, structure, true);\n\t\t\t\tthis.render();\n\t\t\t}, this));\n\t\t}\n\n\t\tvar functions = [];\n\t\tfor (var i in this.operations) functions.push({name: i, title: this._applyLocale(i)});\n\t\tthis.pivotPopup._valueLength = this._valueLength;\n\t\tthis.pivotPopup.define(\"operations\", functions);\n\t\tvar pos = webix.html.offset(this.$$(\"chart\").getNode());\n\t\tthis.pivotPopup.setPosition(pos.x + 10, pos.y + 10);\n\t\tthis.pivotPopup.define(\"data\", this.getFields());\n\t\tthis.pivotPopup._valueFields =\n\t\tthis.pivotPopup.show();\n\t},\n\trender: function(mode) {\n\t\t// render filters\n\t\tvar filters = this._processFilters();\n\t\tif (filters.length) {\n\n\t\t\tthis.$$(\"filters\").show();\n\t\t\tthis.$$(\"filters\").define(\"cols\", filters);\n\t\t\tthis._setFilterEvents();\n\t\t} else {\n\t\t\tthis.$$(\"filters\").hide();\n\t\t}\n\t\tthis._initFilters();\n\n\t\tthis._setChartConfig();\n\n\t\tthis._loadFilteredData();\n\t},\n\t_setChartConfig: function() {\n\t\tvar config = this.config;\n\t\tvar values = config.structure.values;\n\n\t\tfor (var i = 0; i < values.length; i++) {\n\t\t\tvalues[i].operation = values[i].operation || [\"sum\"];\n\t\t\tif (!webix.isArray(values[i].operation))\n\t\t\t\tvalues[i].operation = [values[i].operation];\n\t\t}\n\n\t\tvar chartType = this.config.chartType||\"bar\";\n\t\tvar mapConfig = this.chartMap[chartType];\n\n\t\tvar chart = {\n\n\t\t\t\"type\":  (mapConfig&&mapConfig(\"\").type?mapConfig(\"\").type:chartType),\n\t\t\t\"xAxis\": webix.extend({template: \"#id#\"},config.chart.xAxis||{},true),\n\t\t\t\"yAxis\": webix.extend({},config.chart.yAxis||{})\n\t\t};\n\n\t\twebix.extend(chart,config.chart);\n\t\tif(!chart.padding){\n\t\t\tchart.padding = { top: 17};\n\t\t}\n\n\t\tvar result = this._getSeries();\n\n\t\tchart.series = result.series;\n\n\t\tchart.legend = false;\n\t\tif(config.singleLegendItem || this._valueLength>1){\n\t\t\tchart.legend = result.legend;\n\t\t}\n\n\t\tchart.scheme = {\n\t\t\t$group: this._pivot_group,\n\t\t\t$sort:{\n\t\t\t\tby: \"id\"\n\t\t\t}\n\t\t};\n\t\tthis.$$(\"chart\").removeAllSeries();\n\t\tfor(var c in chart){\n\t\t\tthis.$$(\"chart\").define(c,chart[c]);\n\t\t}\n\n\t},\n\t_applyLocale: function(value){\n\t\treturn webix.i18n.pivot[value]||value;\n\t},\n\t_capitalize: function(value){\n\t\treturn value.charAt(0).toUpperCase() + value.slice(1);\n\t},\n\t_applyMap: function(value, capitalize){\n\t\treturn this.config.fieldMap[value]||(capitalize?this._capitalize(value):value);\n\t},\n\t_processFilters: function() {\n\t\tvar filters = this.config.structure.filters || [];\n\n\t\tvar items = [];\n\t\tfor (var i = 0; i < filters.length; i++) {\n\t\t\tvar f = filters[i];\n\t\t\tvar item = { value: f.value, label: this._applyMap(f.name, true), field: f.name, view: f.type , stringResult: true,\n\t\t\t\t\t\tlabelAlign: this.config.filterLabelAlign, labelWidth: this.config.filterLabelWidth, minWidth: this.config.filterMinWidth, maxWidth: this.config.filterWidth};\n\t\t\tif (f.type == \"select\" || f.type == \"multiselect\"){\n\t\t\t\titem.options = this._distinctValues(f.name);\n\t\t\t\tif(f.type == \"multiselect\")\n\t\t\t\t\titem.options.shift();\n\n\t\t\t}\n\n\t\t\titems.push(item);\n\t\t}\n\t\treturn items;\n\t},\n\t_distinctValues: function(field) {\n\t\tvar values = [{value:\"\",id:\"\"}];\n\t\tvar data = this.data.pull;\n\t\tvar hash = {};\n\t\tfor (var obj in data) {\n\t\t\tvar value = data[obj][field];\n\t\t\tif (!webix.isUndefined(value)){\n\t\t\t\tif (!hash[value]) {\n\t\t\t\t\tvalues.push({ value:value, id:value });\n\t\t\t\t\thash[value] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvalues.sort(function(a,b) {\n\t\t\tvar val1 = a.value;\n\t\t\tvar val2 = b.value;\n\t\t\tif (!val2) return 1;\n\t\t\tif (!val1) return -1;\n\n\t\t\tval1 = val1.toString().toLowerCase(); val2=val2.toString().toLowerCase();\n\t\t\treturn val1>val2?1:(val1<val2?-1:0);\n\t\t});\n\t\treturn values;\n\t},\n\t_loadFilteredData: function(){\n\t\tthis._initFilters();\n\t\tthis.data.silent(function(){\n\t\t\tthis.data.filter(webix.bind(this._filterItem,this));\n\t\t},this);\n\t\tthis.$$(\"chart\").data.silent(function(){\n\t\t\tthis.$$(\"chart\").clearAll();\n\t\t},this);\n\t\tthis.$$(\"chart\").parse(this.data.getRange());\n\n\n\t},\n\t_setFilterEvents: function() {\n\t\tvar filters = this.$$(\"filters\");\n\t\tfilters.reconstruct();\n\t\tvar children = filters.getChildViews();\n\t\tvar pivot = this;\n\n\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\tvar el = children[i];\n\t\t\tif (el.name == \"select\" || el.name == \"multiselect\" || el.name == \"datepicker\")\n\t\t\t\tel.attachEvent(\"onChange\", function(newvalue) {\n\t\t\t\t\tpivot._setFilterValue(this.config.field, newvalue);\n\t\t\t\t});\n\t\t\telse if (!webix.isUndefined(el.getValue)){\n\t\t\t\tel.attachEvent(\"onTimedKeyPress\", function() {\n\t\t\t\t\tpivot._setFilterValue(this.config.field, this.getValue());\n\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\t},\n\n\t_setFilterValue: function(field, value) {\n\t\tvar filters = this.config.structure.filters;\n\t\tfor (var i = 0; i < filters.length; i++)\n\t\t\tif (filters[i].name == field) {\n\t\t\t\tfilters[i].value = value;\n\t\t\t\tthis._loadFilteredData();\n\t\t\t\treturn true;\n\t\t\t}\n\t\treturn false;\n\t},\n\n\tgroupNameToStr: function(obj){\n\t\treturn obj.name+\"_\"+obj.operation;\n\t},\n\tgroupNameToObject: function(name){\n\t\tvar arr = name.split(\"_\");\n\t\treturn {name:arr[0],operation:arr[1]};\n\t},\n\t_getSeries: function(){\n\t\tvar i, j, legend, map = {}, name, legendTitle, series = [],\n\t\t\tvalues = this.config.structure.values;\n\n\t\t// legend definition\n\t\tlegend = {\n\t\t\tvalign:\"middle\",\n\t\t\talign:\"right\",\n\t\t\twidth:140,\n\t\t\tlayout:\"y\"\n\t\t};\n\t\twebix.extend(legend,this.config.chart.legend||{},true);\n\t\tlegend.values = [];\n\t\tif(!legend.marker)\n\t\t\tlegend.marker = {};\n\t\tlegend.marker.type = (this.config.chartType==\"line\"?\"item\":\"s\");\n\n\n\n\n\t\tthis.series_names = [];\n\t\tthis._valueLength = 0;\n\n\t\tfor(i =0; i < values.length; i++){\n\t\t\tif(!webix.isArray(values[i].operation)){\n\t\t\t\tvalues[i].operation = [values[i].operation];\n\t\t\t}\n\t\t\tif(!webix.isArray(values[i].color)){\n\n\t\t\t\tvalues[i].color = [values[i].color||this._getColor(this._valueLength)];\n\t\t\t}\n\t\t\tfor(j=0;j<values[i].operation.length;j++){\n\n\t\t\t\tname = this.templates.groupNameToStr(values[i].name,values[i].operation[j]);\n\t\t\t\tthis.series_names.push(name);\n\t\t\t\tif(!values[i].color[j])\n\t\t\t\t\tvalues[i].color[j] = this._getColor(this._valueLength);\n\t\t\t\tvar color = values[i].color[j];\n\t\t\t\tvar sConfig = this.chartMap[this.config.chartType](color)||{};\n\t\t\t\tsConfig.value = \"#\"+name+\"#\";\n\t\t\t\tsConfig.tooltip = {\n\t\t\t\t\ttemplate: webix.bind(function(obj){\n\t\t\t\t\t\treturn obj[this].toFixed(3);\n\t\t\t\t\t},name)\n\t\t\t\t};\n\n\t\t\t\tseries.push(sConfig);\n\t\t\t\tlegendTitle = this.templates.seriesTitle.call(this,values[i],j);\n\t\t\t\tlegend.values.push({\n\t\t\t\t\ttext: legendTitle,\n\t\t\t\t\tcolor: color\n\t\t\t\t});\n\t\t\t\tmap[name]= [values[i].name,values[i].operation[j]];\n\t\t\t\tthis._valueLength++;\n\t\t\t}\n\t\t}\n\t\tthis._pivot_group = {};\n\t\tif(values.length)\n\t\t\tthis._pivot_group = webix.copy({\n\t\t\t\tby:  this.config.structure.groupBy,\n\t\t\t\tmap: map\n\t\t\t});\n\n\t\treturn {series: series,legend: legend};\n\t},\n\t_getColor:function(i){\n\t\tvar palette = this.config.palette;\n\t\tvar rowIndex = i/palette[0].length;\n\t\trowIndex = (rowIndex> palette.length?0:parseInt(rowIndex,10));\n\t\tvar columnIndex = i%palette[0].length;\n\t\treturn palette[rowIndex][columnIndex];\n\t},\n\t_processLegend: function() {\n\t\tvar i, legend, name,\n\t\t\tvalues=this.config.structure.values;\n\n\t\tlegend = {\n\t\t\tvalign:\"middle\",\n\t\t\talign:\"right\",\n\t\t\twidth:140,\n\t\t\tlayout:\"y\"\n\t\t};\n\n\t\twebix.extend(legend,this.config.chart.legend||{},true);\n\n\t\tlegend.values = [];\n\t\tif(!legend.marker)\n\t\t\tlegend.marker = {};\n\t\tlegend.marker.type = (this.config.chartType==\"line\"?\"item\":\"s\");\n\n\n\t\tfor(i =0; i < values.length; i++){\n\t\t\tname = this.templates.seriesTitle.call(this,values[i]);\n\n\t\t\tlegend.values.push({\n\t\t\t\ttext: name,\n\t\t\t\tcolor: values[i].color\n\t\t\t});\n\t\t}\n\n\t\treturn legend;\n\t},\n\toperations: { sum: 1, count:1, max: 1, min: 1},\n\taddGroupMethod: function(name, method){\n\t\tthis.operations[name] = 1;\n\t\tif(method)\n\t\t\twebix.GroupMethods[name] = method;\n\t},\n\tremoveGroupMethod: function(name){\n\t\tdelete this.operations[name];\n\t},\n\tgroupMethods_setter: function(obj){\n\t\tfor(var a in obj){\n\t\t\tif(obj.hasOwnProperty(a))\n\t\t\t\tthis.addGroupMethod(a, obj[a]);\n\t\t}\n\t},\n\t// fields for edit popup\n\tgetFields: function() {\n\n\t\tvar i,\n\t\t\tfields = [],\n\t\t\tfields_hash = {};\n\t\tfor (i = 0; i < Math.min(this.data.count() || 5); i++) {\n\t\t\tvar item = this.data.getItem(this.data.getIdByIndex(i));\n\t\t\tfor (var f in item) {\n\t\t\t\tif (!fields_hash[f]) {\n\t\t\t\t\tfields.push(f);\n\t\t\t\t\tfields_hash[f] = webix.uid();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar str = this.config.structure;\n\t\tvar result = { fields:[], groupBy:[], values:[], filters:[] };\n\n\n\t\tvar field = (typeof str.groupBy == \"object\"?str.groupBy[0]:str.groupBy);\n\t\tif (!webix.isUndefined(fields_hash[field])) {\n\t\t\tresult.groupBy.push({name: field, text: this._applyMap(field), id: fields_hash[field]});\n\t\t\tdelete fields_hash[field];\n\t\t}\n\n\t\tvar valueNameHash = {};\n\t\tvar text;\n\t\tfor (i = 0; i < str.values.length; i++) {\n\t\t\tfield = str.values[i];\n\t\t\tif (!webix.isUndefined(fields_hash[field.name])) {\n\t\t\t\ttext = this._applyMap(field.name);\n\t\t\t\tif(webix.isUndefined(valueNameHash[field.name])){\n\t\t\t\t\tvalueNameHash[field.name] = result.values.length;\n\t\t\t\t\tresult.values.push({name: field.name, text: text, operation: field.operation, color: field.color||[this._getColor(i)], id: fields_hash[field.name]});\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tvar value = result.values[valueNameHash[field.name]];\n\t\t\t\t\tvalue.operation =value.operation.concat(field.operation);\n\t\t\t\t\tvalue.color =value.color.concat(field.color||[this._getColor(i)]);\n\t\t\t\t}\n\n\t\t\t\t//delete fields_hash[field.name];   // values allows to drag a field multiple times\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < (str.filters || []).length; i++) {\n\t\t\tfield = str.filters[i];\n\t\t\tif (!webix.isUndefined(fields_hash[field.name])) {\n\t\t\t\ttext = this._applyMap(field.name);\n\t\t\t\tresult.filters.push({name: field.name, text: text, type:field.type, value:field.value, id: fields_hash[field]});\n\t\t\t\tdelete fields_hash[field.name];\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < fields.length; i++) {\n\t\t\tfield = fields[i];\n\t\t\tif (!webix.isUndefined(fields_hash[field]))\n\t\t\t\tresult.fields.push({name:field, text: this._applyMap(field), id: fields_hash[field]});\n\t\t}\n\t\treturn result;\n\t},\n\t_initFilters: function() {\n\t\tvar filters = this.config.structure.filters || [];\n\t\tflt.init(filters);\n\t},\n\t_filterItem: function(item) {\n\t\tvar filters = this.config.structure.filters || [];\n\t\treturn flt.filterItem(filters,item);\n\t},\n\tgetStructure: function() {\n\t\treturn this.config.structure;\n\t},\n\tgetConfigWindow: function(){\n\t\treturn this._config_popup;\n\t}\n}, webix.IdSpace, webix.ui.layout, webix.DataLoader, webix.EventSystem, webix.Settings);\n\n\n/** WEBPACK FOOTER **\n ** ./sources/pivotchart.js\n **/","webix.protoUI({\n    name: \"webix_pivot_chart_config\",\n\n    $init: function(config) {\n        this.$view.className += \" webix_pivot_chart_popup\";\n        webix.extend(config,this.defaults);\n        webix.extend(config, this._getUI(config));\n        this.$ready.push(this._afterInit);\n    },\n    defaults:{\n        padding:8,\n        height: 500,\n        width: 650,\n        head: false,\n        modal:true,\n        move: true,\n        chartTypeLabelWidth: 80,\n        chartTypeWidth: 250,\n        cancelButtonWidth: 100,\n        applyButtonWidth: 100,\n        logScaleLabelWidth: 125,\n        fieldsColumnWidth: 280\n    },\n    _getUI: function(config) {\n        var chartTypes = [];\n        var pivot = webix.$$(config.pivot);\n        var types = pivot.chartMap;\n        for(var type in types){\n            chartTypes.push({id: type, value: pivot._applyLocale(type)});\n        }\n        return {\n            head:{\n                view:\"toolbar\",\n                cols: [\n                    { id: \"config_title\",  view: \"label\", label: webix.i18n.pivot.windowTitle },\n                    { view: \"button\", id: \"cancel\",  label: pivot._applyLocale(\"cancel\"), width: config.cancelButtonWidth },\n                    { view: \"button\", id: \"apply\", type: \"form\", css:\"webix_pivot_apply\", label:pivot._applyLocale(\"apply\"), width:config.applyButtonWidth }\n                ]\n            },\n            body: {\n                type: \"space\",\n                rows:[\n                    /*{\n                     type: \"space\",\n                     cols:[\n                     {\tcss:\"webix_pivot_transparent\", borderless: true, template: \"<div class='webix_pivot_fields_msg'>\"+webix.i18n.pivot.windowMessage||\"\"+\"</div>\", height: 25}\n                     ]\n\n                     },*/\n                    {\n\n                        type: \"wide\",\n                        cols: [\n                            {\n                                width: config.fieldsColumnWidth,\n                                rows: [\n                                    { id: \"fieldsHeader\",  css: \"webix_pivot_header_fields\", template: \"<div class='webix_pivot_fields_msg'>\"+webix.i18n.pivot.windowMessage||\"\"+\"</div>\", height: 40 },\n                                    { id: \"fields\", view: \"list\", type: {height: \"auto\"}, drag: true, template: \"<span class='webix_pivot_list_marker'></span>#text#\",\n                                        on:{\n                                            onBeforeDrop: webix.bind(this._skipValueDrag,this),\n                                            onBeforeDropOut: webix.bind(this._checkValueDrag,this),\n\n                                            onBeforeDrag:  webix.bind(this._hidePopups,this)\n                                        }\n                                    }\n                                ]\n                            },\n                            //\t{ view: \"resizer\", width: 4},\n                            {\n\n                                type: \"wide\",\n                                rows:[\n                                    {\n                                        rows:[\n                                            { id: \"filtersHeader\", data:{value: \"filters\", icon:\"filter\" }, template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40 },\n                                            { id: \"filters\", view: \"list\", scroll: true, gravity:2, drag: true, css: \"webix_pivot_values\",\n                                                template: function (obj) {\n                                                    obj.type = obj.type || \"select\";\n                                                    return \"<div class='webix_pivot_link'>\" + obj.text+ \"<div class='webix_link_selection filter'>\" + pivot._applyLocale(obj.type) + \"</div></div> \";\n                                                },\n                                                type: {\n                                                    height: 35\n                                                },\n                                                onClick: { \"webix_link_selection\": webix.bind(this._filterSelector, this) },\n                                                on: {\n                                                    onBeforeDrag:  webix.bind(this._hidePopups,this)\n                                                }\n\n                                            }\n                                        ]\n                                    },\n                                    {\n                                        rows:[\n                                            { id: \"valuesHeader\", data:{value: \"values\", icon:\"bar-chart\"},  template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40},\n                                            { id: \"values\", view: \"list\", scroll: true, gravity:3, drag: true, css: \"webix_pivot_values\", type: { height: \"auto\" },\n                                                template: webix.bind(this._function_template, this),\n                                                onClick: {\n                                                    \"webix_link_title\": webix.bind(this._function_selector, this),\n                                                    \"webix_link_selection\": webix.bind(this._function_selector, this),\n                                                    \"webix_color_selection\": webix.bind(this._function_color, this),\n                                                    \"webix_pivot_minus\": webix.bind(this._function_remove, this)\n                                                },\n                                                on:{\n                                                    onBeforeDrop: webix.bind(this._copyValueField,this),\n                                                    onBeforeDropOut: webix.bind(this._checkValueDrag,this),\n                                                    onBeforeDrag:  webix.bind(this._hidePopups,this)\n                                                }\n                                            }\n                                        ]\n                                    },\n                                    {\n                                        rows:[\n                                            { id: \"groupHeader\", data:{value: \"groupBy\", icon:\"sitemap\"},  template: this._popup_templates.popupIconHeaders, css: \"webix_pivot_popup_title\", height: 40},\n                                            { id: \"groupBy\", view: \"list\", yCount:1, scroll: false, drag: true, type: {height: 35},\n                                                template: \"<a class='webix_pivot_link'>#text#</a> \",\n                                                on:{\n                                                    onBeforeDrop: webix.bind(this._changeGroupby,this),\n                                                    onBeforeDrag:  webix.bind(this._hidePopups,this)\n                                                }\n                                            }\n                                        ]\n                                    }\n\n\n\n\n                                ]\n                            }\n                        ]\n                    },{\n                        /*paddingX: 10,\n                         paddingY: 5,*/\n                        borderless: true,\n                        css: \"webix_pivot_footer\",\n                        /*padding: 5,\n                         type: \"space\",*/\n                        cols:[\n                            {\n                                view: \"checkbox\", id:\"logScale\", value: (pivot.config.chart.scale&&pivot.config.chart.scale == \"logarithmic\"), label: webix.i18n.pivot.logScale,\n                                labelWidth: config.logScaleLabelWidth, width: (config.logScaleLabelWidth + 20)\n                            },\n                            {},\n                            {\n                                view: \"select\", id:\"chartType\", value: pivot.config.chartType,  label: webix.i18n.pivot.chartType,  options: chartTypes,\n                                labelWidth: config.chartTypeLabelWidth,  width: config.chartTypeWidth\n                            }\n                        ]\n                    }\n                ]\n\n            }\n        };\n    },\n    _popup_templates: {\n        popupHeaders: function(obj){\n            return webix.i18n.pivot[obj.value];\n        },\n        popupIconHeaders: function(obj){\n            return \"<span class='webix_pivot_header_icon webix_icon fa-\"+obj.icon+\"'></span>\"+webix.i18n.pivot[obj.value];\n        }\n    },\n    _hidePopups: function(){\n        webix.callEvent(\"onClick\",[]);\n    },\n    _skipValueDrag: function(ctx){\n        if(ctx.from == this.$$(\"values\")){\n            var id = ctx.source[0];\n            if(this.$$(\"values\").getItem(id)){\n                this.$$(\"values\").remove(id);\n            }\n            return false;\n        }\n        return true;\n    },\n    _checkValueDrag: function(ctx){\n        if(ctx.to != ctx.from){\n            var id = ctx.source[0];\n            if(ctx.from == this.$$(\"values\") && ctx.to != this.$$(\"fields\")){\n                delete this.$$(\"values\").getItem(id).operation;\n                delete this.$$(\"values\").getItem(id).color;\n                if(this.$$(\"fields\").getItem(id))\n                    this.$$(\"fields\").remove(id);\n            }\n            else if(ctx.from == this.$$(\"fields\") && ctx.to != this.$$(\"values\")){\n                if(this.$$(\"values\").getItem(id)){\n                    this.$$(\"values\").remove(id);\n                }\n            }\n        }\n    },\n    _copyValueField: function(ctx){\n        if( ctx.to && ctx.from != ctx.to ){\n            var id = ctx.source;\n            var item = ctx.from.getItem(id);\n\n            if(ctx.from == this.$$(\"fields\")){\n                if(ctx.to.getItem(id)){\n                    this._function_add({},id);\n                    this._valueLength++;\n                }\n                else{\n                    item  = webix.copy(item);\n\n                    ctx.to.add(webix.copy(item),ctx.index);\n                    this._valueLength++;\n                }\n\n                return false;\n            }\n            else if(!this.$$(\"fields\").getItem(id)){\n                this.$$(\"fields\").add(webix.copy(item));\n            }\n\n            this._increaseColorIndex = true;\n        }\n        return true;\n    },\n    _changeGroupby: function(ctx){\n        if(this.$$(\"groupBy\").data.order.length){\n            var id = this.$$(\"groupBy\").getFirstId();\n            var item = webix.copy(this.$$(\"groupBy\").getItem(id));\n            this.$$(\"groupBy\").remove(id);\n            this.$$(\"fields\").add(item);\n        }\n        return true;\n    },\n    _afterInit: function() {\n        this.attachEvent(\"onItemClick\", function(id){\n            if (this.$eventSource.name == \"button\"){\n                //transform button clicks to events\n                var structure = this.getStructure();\n\n                if(this.innerId(id) == \"apply\" && (!structure.values.length || !structure.groupBy)){\n                    webix.alert(webix.i18n.pivot.valuesNotDefined);\n                }\n                else{\n                    this.callEvent(\"on\"+this.innerId(id), [structure]);\n                    this.hide();\n                }\n            }\n        });\n    },\n\n    _function_template: function (obj) {\n        obj.operation = obj.operation || [\"sum\"];\n        if (!webix.isArray(obj.operation))\n            obj.operation = [obj.operation];\n\n        var ops = [];\n        var pivot = webix.$$(this.config.pivot);\n        var locale = pivot._applyLocale;\n\n        for (var i = 0; i < obj.operation.length; i++) {\n            if(!obj.color)\n                obj.color = [pivot._getColor(this._valueLength)];\n            if(!obj.color[i])\n                obj.color.push(pivot._getColor(this._valueLength));\n            var op = \"<div class='webix_pivot_link' webix_operation='\" + i + \"'>\";\n            op += \"<div class='webix_color_selection'><div style='background-color:\"+locale(obj.color[i])+\"'></div></div>\";\n            op += \"<div class='webix_link_title'>\" + obj.text + \"</div>\";\n            op += \"<div class='webix_link_selection'>\" + locale(obj.operation[i]) + \"</div>\";\n\n            op += \"<div class='webix_pivot_minus webix_icon fa-times'></div>\";\n            op += \"</div>\";\n            ops.push(op);\n        }\n        if(this._increaseColorIndex){\n            this._increaseColorIndex= false;\n            this._valueLength++;\n        }\n        return ops.join(\" \");\n    },\n\n    _function_selector: function(e,id) {\n        var func_selector = {\n            view: \"webix_pivot_popup\", autofit:true,\n            autoheight: true, width: 150,\n            data: this.config.operations||[]\n        };\n        var p = webix.ui(func_selector);\n        p.show(e);\n        p.attachEvent(\"onHide\", webix.bind(function() {\n            var index = webix.html.locate(e, \"webix_operation\");\n            var sel = p.getSelected();\n            if (sel !== null) {\n                this.$$(\"values\").getItem(id).operation[index] = sel.name;\n                this.$$(\"values\").updateItem(id);\n            }\n\n            p.close();\n        }, this));\n    },\n    _function_color: function(e,id) {\n\n        var colorboard = {\n            view: \"colorboard\",\n            //id: \"colorboard\",\n            borderless: true\n\n        };\n        if(webix.$$(this.config.pivot).config.colorboard){\n            webix.extend(colorboard,webix.$$(this.config.pivot).config.colorboard);\n        }\n        else{\n            webix.extend(colorboard,{\n                width:  150,\n                height: 150,\n                palette: webix.$$(this.config.pivot).config.palette\n            });\n        }\n\n        var p = webix.ui({\n            view:\"popup\",\n            id: \"colorsPopup\",\n            body:colorboard\n        });\n        p.show(e);\n        p.getBody().attachEvent(\"onSelect\",function(){\n            p.hide();\n        });\n        p.attachEvent(\"onHide\", webix.bind(function() {\n            var index = webix.html.locate(e, \"webix_operation\");\n            var value = p.getBody().getValue();\n            if (value) {\n                this.$$(\"values\").getItem(id).color[index] = value;\n                this.$$(\"values\").updateItem(id);\n            }\n            p.close();\n        }, this));\n        return false;\n    },\n    _function_add: function(e,id) {\n        var item = this.$$(\"values\").getItem(id);\n        item.operation.push(\"sum\");\n        var pivot = webix.$$(this.config.pivot);\n        var palette = pivot.config.palette;\n        item.color.push(pivot._getColor(this._valueLength));\n        this.$$(\"values\").updateItem(id);\n\n        webix.delay(function(){\n            var index = item.operation.length-1;\n            var els = this.$$(\"values\").getItemNode(id).childNodes;\n            var el = null;\n            for (var i = 0; i < els.length; i++) {\n                el = els[i];\n                if (!el.getAttribute) continue;\n                var op = el.getAttribute(\"webix_operation\");\n                if (!webix.isUndefined(op) && op == index) break;\n            }\n            if (el!==null)\n                this._function_selector(el, id);\n        }, this);\n    },\n    _function_remove: function(e, id) {\n        var index = webix.html.locate(e, \"webix_operation\");\n        var item = this.$$(\"values\").getItem(id);\n        if (item.operation.length > 1) {\n            item.operation.splice(index, 1);\n            this.$$(\"values\").updateItem(id);\n        } else {\n            this.$$(\"values\").remove(id);\n            //this.$$(\"values\").move(id, null, this.$$(\"fields\"));\n        }\n        return false;\n    },\n\n    _filterSelector: function(e,id) {\n        var locale = webix.$$(this.config.pivot)._applyLocale;\n        var selector = {\n            view: \"webix_pivot_popup\", autofit:true,\n            height: 150, width: 150,\n            data: [\n                {name:\"datepicker\", title: locale(\"date\")},\n                {name:\"multiselect\", title: locale(\"multiselect\")},\n                {name:\"select\", title: locale(\"select\")},\n                {name:\"text\", title: locale(\"text\")}\n            ]\n        };\n        var p = webix.ui(selector);\n        p.show(e);\n        p.attachEvent(\"onHide\", webix.bind(function() {\n            var sel = p.getSelected();\n            if (sel !== null) {\n                var item = this.$$('filters').getItem(id);\n                item.type = sel.name;\n                this.$$('filters').updateItem(id);\n            }\n\n            p.close();\n        }, this));\n    },\n\n    data_setter: function(value) {\n        this.$$(\"fields\").clearAll();\n        this.$$(\"fields\").parse(value.fields);\n        this.$$(\"fields\").filter(function(item){\n            return item.name != \"id\";\n        });\n\n        this.$$(\"filters\").clearAll();\n        this.$$(\"filters\").parse(value.filters);\n\n        this.$$(\"groupBy\").clearAll();\n        this.$$(\"groupBy\").parse(value.groupBy);\n\n\n        this.$$(\"values\").clearAll();\n        this.$$(\"values\").parse(value.values);\n    },\n    getStructure: function() {\n        var structure = { groupBy:\"\",values:[],filters:[] };\n\n        var groupBy = this.$$(\"groupBy\");\n        if(groupBy.count())\n            structure.groupBy = groupBy.getItem(groupBy.getFirstId()).name;\n\n\n        var values = this.$$(\"values\");\n        var temp;\n        values.data.each(webix.bind(function(obj){\n            for(var j=0; j< obj.operation.length; j++){\n                temp = webix.copy(obj);\n\n                webix.extend(temp,{operation: obj.operation[j],color:  obj.color[j]||webix.$$(this.config.pivot).config.color},true);\n\n                structure.values.push(temp);\n            }\n        },this));\n\n        var filters = this.$$(\"filters\");\n        filters.data.each(function(obj){\n            structure.filters.push(obj);\n        });\n\n        return structure;\n    }\n}, webix.ui.window, webix.IdSpace);\n\n\n/** WEBPACK FOOTER **\n ** ./sources/views/chartpopup.js\n **/"],"sourceRoot":""}